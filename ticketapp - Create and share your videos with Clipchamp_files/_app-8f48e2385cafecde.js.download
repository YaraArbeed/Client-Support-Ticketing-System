(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4285:function(e,t,n){"use strict";function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}n.d(t,{S:function(){return i},n:function(){return r}})},7392:function(e,t,n){"use strict";n.d(t,{KV:function(){return o},l$:function(){return s}});var r=n(4285);e=n.hmd(e);var i=n(4406);function o(){return!(0,r.n)()&&"[object process]"===Object.prototype.toString.call(void 0!==i?i:0)}function s(e,t){return e.require(t)}},7790:function(e,t,n){"use strict";n.d(t,{ph:function(){return l},yW:function(){return u}});var r=n(7392),i=n(63);e=n.hmd(e);let o=(0,i.Rf)(),s={nowSeconds:()=>Date.now()/1e3},a=(0,r.KV)()?function(){try{let t=(0,r.l$)(e,"perf_hooks");return t.performance}catch(e){return}}():function(){let{performance:e}=o;if(!e||!e.now)return;let t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);(()=>{let{performance:e}=o;if(!e||!e.now)return;let t=e.now(),n=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,i=e.timing&&e.timing.navigationStart,s="number"==typeof i?Math.abs(i+t-n):36e5;if(r<36e5||s<36e5)return r<=s?e.timeOrigin:void 0})()},63:function(e,t,n){"use strict";function r(e){return e&&e.Math==Math?e:void 0}n.d(t,{Rf:function(){return o},YO:function(){return s},n2:function(){return i}});let i="object"==typeof globalThis&&r(globalThis)||"object"==typeof window&&r(window)||"object"==typeof self&&r(self)||"object"==typeof n.g&&r(n.g)||function(){return this}()||{};function o(){return i}function s(e,t,n){let r=n||i,o=r.__SENTRY__=r.__SENTRY__||{},s=o[e]||(o[e]=t());return s}},6570:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(2622)}])},2622:function(e,t,n){"use strict";n.r(t);var r=n(2322),i=n(2784),o=n(4741);t.default=function(e){let{Component:t,pageProps:n,router:s}=e;return(0,i.useEffect)(()=>{let e=e=>{(0,o.Ys)(e)};return s.events.on("routeChangeComplete",e),()=>{s.events.off("routeChangeComplete",e)}},[s]),(0,r.jsx)(i.StrictMode,{children:(0,r.jsx)(t,{...n})})}},4741:function(e,t,n){"use strict";let r,i,o,s,a,c,u;n.d(t,{uX:function(){return Y},SC:function(){return W},yW:function(){return e2},X8:function(){return e4},zj:function(){return B},HI:function(){return I},ST:function(){return A},H:function(){return rm},Ys:function(){return e3},Z0:function(){return k},WS:function(){return eX},K8:function(){return eJ},O7:function(){return F},jw:function(){return N},pv:function(){return e0},c0:function(){return rE},Ef:function(){return rb}});var l,h,f,p,d,g,_,v,y,m,E,b,S,w,T,O,C,R=n(2784);function I(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];window.amplitude&&"function"==typeof window.amplitude.getInstance&&window.amplitude.getInstance().logEvent(...t)}function A(e,t,n){return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return I(t,n),e(...i)}}function N(e,t,n){(0,R.useEffect)(()=>{I(e,t)},n)}function k(e,t){(0,R.useEffect)(()=>{t&&function(e,t){if(window.amplitude&&"function"==typeof window.amplitude.getInstance){let n=new window.amplitude.Identify().setOnce(e,t);window.amplitude.getInstance().identify(n)}}(e,t)},[e,t])}var x=JSON.parse('{"CLIPCHAMP_BASE":"https://beta.clipchamp.com","CLIPCHAMP_APP_BASE":"https://app.beta.clipchamp.com","AMPLITUDE_KEY":"19e9aa37760727ad82ec0736191678cb","MESSENGER_APP_ID":"746769992041789","GA_TRACKING_ID":"UA-41962877-16","OPTIMIZE_CONTAINER_ID":"GTM-5H4WSZ6","NAME":"beta","SENTRY_DSN":"https://a33cbbec1cea4939a0fb1455b2197309@o101308.ingest.sentry.io/5280780","CONFIG_CAT_SDK_KEY":"k-3XCFeUBEWCY4tWabIpEg/_RlvlMD_gEiAxKNB-vyXXg"}'),D=JSON.parse('{"CLIPCHAMP_BASE":"http://localhost:8000","CLIPCHAMP_APP_BASE":"https://app.local.clipchamp.dev","AMPLITUDE_KEY":"19e9aa37760727ad82ec0736191678cb","MESSENGER_APP_ID":"746769992041789","GA_TRACKING_ID":"UA-41962877-16","OPTIMIZE_CONTAINER_ID":"GTM-5H4WSZ6","NAME":"development","SENTRY_DSN":"https://a33cbbec1cea4939a0fb1455b2197309@o101308.ingest.sentry.io/5280780","CONFIG_CAT_SDK_KEY":"k-3XCFeUBEWCY4tWabIpEg/o9dIxCj1RE2246ekncaErw"}'),L=JSON.parse('{"CLIPCHAMP_BASE":"https://clipchamp.com","CLIPCHAMP_APP_BASE":"https://app.clipchamp.com","AMPLITUDE_KEY":"d9675794e3e6fcefe2afc60902515b07","MESSENGER_APP_ID":"746769992041789","GA_TRACKING_ID":"UA-41962877-17","OPTIMIZE_CONTAINER_ID":"GTM-T9SG4DG","NAME":"prod","SENTRY_DSN":"https://a33cbbec1cea4939a0fb1455b2197309@o101308.ingest.sentry.io/5280780","CONFIG_CAT_SDK_KEY":"k-3XCFeUBEWCY4tWabIpEg/hLQsnDXDhEe7OFBp6Cl2yw"}'),P=JSON.parse('{"CLIPCHAMP_BASE":"https://test.clipchamp.com","CLIPCHAMP_APP_BASE":"https://app.test.clipchamp.com","AMPLITUDE_KEY":"19e9aa37760727ad82ec0736191678cb","MESSENGER_APP_ID":"746769992041789","GA_TRACKING_ID":"UA-41962877-16","OPTIMIZE_CONTAINER_ID":"GTM-5H4WSZ6","NAME":"test","SENTRY_DSN":"https://a33cbbec1cea4939a0fb1455b2197309@o101308.ingest.sentry.io/5280780","CONFIG_CAT_SDK_KEY":"k-3XCFeUBEWCY4tWabIpEg/dIXpSCKMg06hHqDsH2DZ_w"}'),U=n(4406);let j={development:D,test:P,beta:x,prod:L},G={"test-clipchamp-button":"test","beta-clipchamp-button":"beta","clipchamp-button":"prod"},M={"watch-pages-dot-test-clipchamp-button.uc.r.appspot.com":"test","watch-pages-dot-beta-clipchamp-button.uc.r.appspot.com":"beta","watch-pages-dot-clipchamp-button.uc.r.appspot.com":"prod","watch.test.clipchamp.com":"test","watch.beta.clipchamp.com":"beta","clipchamp.com":"prod"};function B(){if(void 0!==n.g.Environment)return Environment;let e=U.env.GOOGLE_CLOUD_PROJECT,t=window.location.hostname,r=t?M[t]||"development":e in G?G[e]||"development":"prod";return j[r]}let $=(0,R.createContext)(void 0),Y=$.Provider;function F(){let e=(0,R.useContext)($);if(!e)throw Error("No environment provided.");return e}class V extends Error{constructor(e,t){super("".concat(e,": ").concat(t)),this.statusCode=e,this.message=t}}async function W(e,t,n){let{CLIPCHAMP_APP_BASE:r}=null!=n?n:B(),i=await fetch("".concat(r,"/v2/").concat(e),t);if(!i.ok)throw new V(i.status,i.statusText);return i}var H=n(2970);(h=E||(E={}))[h.Fetched=0]="Fetched",h[h.NotModified=1]="NotModified",h[h.Errored=2]="Errored";var K=function(){function e(e,t,n,r,i){this.status=e,this.responseBody=t,this.eTag=n,this.errorMessage=r,this.errorException=i}return e.success=function(t,n){return new e(E.Fetched,t,n)},e.notModified=function(){return new e(E.NotModified,"")},e.error=function(t,n){return new e(E.Errored,"",void 0,null!=t?t:"Unknown error.",n)},e}(),q=function(e){function t(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=this;switch(n){case"abort":r="Request was aborted.";break;case"timeout":var a=i[0];r="Request timed out. Timeout value: ".concat(a,"ms");break;case"failure":var c=i[0];r="Request failed due to a network or protocol error.",c&&(r+=" "+(c instanceof Error?c.message:c+""))}return(s=e.call(this,r)||this).cause=n,s instanceof t||(Object.setPrototypeOf||function(e,t){return e.__proto__=t})(s,t.prototype),s.args=i,s}return(0,H.ZT)(t,e),t}(Error),J=function(){function e(e,t,n){this.Timestamp=e,this.ConfigJSON="string"==typeof t?JSON.parse(t):t,this.HttpETag=n}return e.equals=function(e,t){return e?!!t&&(e.HttpETag&&t.HttpETag?this.compareEtags(e.HttpETag,t.HttpETag):JSON.stringify(e.ConfigJSON)===JSON.stringify(t.ConfigJSON)):!t},e.compareEtags=function(e,t){return this.ensureStrictEtag(e)===this.ensureStrictEtag(t)},e.ensureStrictEtag=function(e){return e?e.length>2&&"W/"===e.substr(0,2).toLocaleUpperCase()?e.substring(2):e:""},e.isExpired=function(e,t){return!e||e.Timestamp+t<new Date().getTime()},e}(),z=function(){function e(){}return e.Preferences="p",e.FeatureFlags="f",e}(),X=function(){function e(){}return e.BaseUrl="u",e.Redirect="r",e}(),Z=function(){function e(e,t,n,r){this.value=e,this.rolloutPercentageItems=t,this.rolloutRules=n,this.variationId=r}return e.fromJson=function(t){var n,r,i,o;return new e(t[this.Value],null!==(r=null===(n=t[this.RolloutPercentageItems])||void 0===n?void 0:n.map(function(e){return ee.fromJson(e)}))&&void 0!==r?r:[],null!==(o=null===(i=t[this.RolloutRules])||void 0===i?void 0:i.map(function(e){return Q.fromJson(e)}))&&void 0!==o?o:[],t[this.VariationId])},e.Value="v",e.SettingType="t",e.RolloutPercentageItems="p",e.RolloutRules="r",e.VariationId="i",e}(),Q=function(){function e(e,t,n,r,i){this.comparisonAttribute=e,this.comparator=t,this.comparisonValue=n,this.value=r,this.variationId=i}return e.fromJson=function(t){return new e(t[this.ComparisonAttribute],t[this.Comparator],t[this.ComparisonValue],t[this.Value],t[this.VariationId])},e.Order="o",e.ComparisonAttribute="a",e.Comparator="t",e.ComparisonValue="c",e.Value="v",e.VariationId="i",e}(),ee=function(){function e(e,t,n){this.percentage=e,this.value=t,this.variationId=n}return e.fromJson=function(t){return new e(t[this.Percentage],t[this.Value],t[this.VariationId])},e.Order="o",e.Value="v",e.Percentage="p",e.VariationId="i",e}(),et=function(){function e(e,t){this.errorMessage=e,this.errorException=t}return Object.defineProperty(e.prototype,"isSuccess",{get:function(){return null===this.errorMessage},enumerable:!1,configurable:!0}),e.from=function(t){return t.status!==E.Errored?e.success():e.failure(t.errorMessage,t.errorException)},e.success=function(){return new e(null)},e.failure=function(t,n){return new e(t,n)},e}();(f=b||(b={}))[f.Online=0]="Online",f[f.Offline=1]="Offline",f[f.Disposed=2]="Disposed";var en=function(){function e(e,t){this.pendingFetch=null,this.configFetcher=e,this.options=t,this.status=t.offline?b.Offline:b.Online}return e.prototype.dispose=function(){this.status=b.Disposed},Object.defineProperty(e.prototype,"disposed",{get:function(){return this.status===b.Disposed},enumerable:!1,configurable:!0}),e.prototype.refreshConfigAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){var e,t,n,r;return(0,H.Jh)(this,function(i){switch(i.label){case 0:return[4,this.options.cache.get(this.options.getCacheKey())];case 1:if(e=i.sent(),this.isOffline)return[3,3];return[4,this.refreshConfigCoreAsync(e)];case 2:return n=(t=i.sent())[0],r=t[1],[2,[et.from(n),r]];case 3:return this.logOfflineModeWarning(),[2,[et.failure("Client is in offline mode, it can't initiate HTTP calls."),e]]}})})},e.prototype.refreshConfigCoreAsync=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i;return(0,H.Jh)(this,function(o){switch(o.label){case 0:return[4,this.fetchAsync(e)];case 1:if(n=(t=o.sent())[0],r=t[1],i=!J.equals(e,r),!(r&&(i||r.Timestamp>e.Timestamp)))return[3,3];return[4,this.options.cache.set(this.options.getCacheKey(),r)];case 2:return o.sent(),this.onConfigUpdated(r),i&&this.onConfigChanged(r),[2,[n,r]];case 3:return[2,[n,e]]}})})},e.prototype.onConfigUpdated=function(e){},e.prototype.onConfigChanged=function(e){this.options.logger.debug("config changed"),this.options.hooks.emit("configChanged",e)},e.prototype.fetchAsync=function(e){var t;return null!==(t=this.pendingFetch)&&void 0!==t?t:this.pendingFetch=(0,H.mG)(this,void 0,void 0,function(){return(0,H.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,this.fetchLogicAsync(e)];case 1:return[2,t.sent()];case 2:return this.pendingFetch=null,[7];case 3:return[2]}})})},e.prototype.fetchLogicAsync=function(e){var t;return(0,H.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return(0,H.Jh)(this,function(u){switch(u.label){case 0:(n=this.options).logger.debug("ConfigServiceBase.fetchLogicAsync() - called."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.fetchRequestAsync(null!==(t=null==e?void 0:e.HttpETag)&&void 0!==t?t:null)];case 2:switch(o=(i=u.sent())[0],s=i[1],o.statusCode){case 200:if(!s)return r="Fetch was successful but HTTP response was invalid",n.logger.debug("ConfigServiceBase.fetchLogicAsync(): ".concat(r.charAt(0).toLowerCase()).concat(r.slice(1),". Returning null.")),[2,[K.error(r),null]];return n.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was successful. Returning new config."),[2,[K.success(o.body,o.eTag),new J(new Date().getTime(),s,o.eTag)]];case 304:if(!e)return r="HTTP response ".concat(o.statusCode," ").concat(o.reasonPhrase," was received when no config is cached locally"),n.logger.debug("ConfigServiceBase.fetchLogicAsync(): ".concat(r.charAt(0).toLowerCase()).concat(r.slice(1),". Returning null.")),[2,[K.error(r),null]];return n.logger.debug("ConfigServiceBase.fetchLogicAsync(): content was not modified. Returning last config with updated timestamp."),[2,[K.notModified(),new J(new Date().getTime(),e.ConfigJSON,e.HttpETag)]];case 403:case 404:return r="Double-check your SDK Key at https://app.configcat.com/sdkkey",n.logger.error(r),n.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning last config (if any) with updated timestamp."),[2,[K.error(r),e?new J(new Date().getTime(),e.ConfigJSON,e.HttpETag):null]];default:return r="Unexpected HTTP response was received: ".concat(o.statusCode," ").concat(o.reasonPhrase),n.logger.error(r),n.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning null."),[2,[K.error(r),null]]}return[3,4];case 3:return c=(a=u.sent())instanceof q?a.message:"Unexpected error occurred during fetching.",n.logger.error(c,a),n.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning null."),[2,[K.error(c,a),null]];case 4:return[2]}})})},e.prototype.fetchRequestAsync=function(e,t){return void 0===t&&(t=2),(0,H.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return(0,H.Jh)(this,function(u){switch(u.label){case 0:(n=this.options).logger.debug("ConfigServiceBase.fetchRequestAsync() - called."),r=0,u.label=1;case 1:return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): calling fetchLogic()".concat(r>0?", retry ".concat(r,"/").concat(t):"")),[4,this.configFetcher.fetchLogic(n,e)];case 2:if(200!==(i=u.sent()).statusCode)return[2,[i]];if(!i.body)return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): no response body."),[2,[i]];o=void 0;try{o=JSON.parse(i.body)}catch(e){return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): invalid response body."),[2,[i]]}if(!(s=o[z.Preferences]))return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): preferences is empty."),[2,[i,o]];if(!(a=s[X.BaseUrl])||a==n.baseUrl)return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): baseUrl OK."),[2,[i,o]];if(c=s[X.Redirect],n.baseUrlOverriden&&2!==c)return n.logger.debug("ConfigServiceBase.fetchRequestAsync(): options.baseUrlOverriden && redirect !== 2."),[2,[i,o]];if(n.baseUrl=a,0===c)return[2,[i,o]];if(1===c&&n.logger.warn("Your dataGovernance parameter at ConfigCatClient initialization is not in sync with your preferences on the ConfigCat Dashboard: https://app.configcat.com/organization/data-governance. Only Organization Admins can access this preference."),r>=t)return n.logger.error("Redirect loop during config.json fetch. Please contact support@configcat.com."),[2,[i,o]];u.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},Object.defineProperty(e.prototype,"isOfflineExactly",{get:function(){return this.status===b.Offline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOffline",{get:function(){return this.status!==b.Online},enumerable:!1,configurable:!0}),e.prototype.setOnlineCore=function(){},e.prototype.setOnline=function(){this.status===b.Offline?(this.setOnlineCore(),this.status=b.Online,this.logStatusChange(this.status)):this.disposed&&this.logDisposedWarning("setOnline")},e.prototype.setOfflineCore=function(){},e.prototype.setOffline=function(){this.status==b.Online?(this.setOfflineCore(),this.status=b.Offline,this.logStatusChange(this.status)):this.disposed&&this.logDisposedWarning("setOnline")},e.prototype.logStatusChange=function(e){var t;this.options.logger.debug("Switched to ".concat(null===(t=b[e])||void 0===t?void 0:t.toUpperCase()," mode."))},e.prototype.logOfflineModeWarning=function(){this.options.logger.warn("Client is in offline mode, it can't initiate HTTP calls.")},e.prototype.logDisposedWarning=function(e){this.options.logger.warn("Client has already been disposed, thus ".concat(e,"() has no effect."))},e}(),er=function(e){return void 0===e};function ei(e){return e?new Date(e.Timestamp):void 0}function eo(e,t){return void 0===t&&(t=!1),e instanceof Error?t&&e.stack?e.stack:e.toString():e+""}var es=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.signalInitialization=void 0,n.maxInitWaitTimeSeconds>0?(r.initialized=!1,r.initialization=new Promise(function(e){return r.signalInitialization=function(){r.initialized=!0,e()}}),r.initialization.then(function(){return!r.disposed&&n.hooks.emit("clientReady")}),setTimeout(function(){return r.signalInitialization()},1e3*n.maxInitWaitTimeSeconds)):(r.initialized=!0,r.initialization=Promise.resolve(),n.hooks.emit("clientReady")),n.offline||r.startRefreshWorker(1e3*n.pollIntervalSeconds),r}return(0,H.ZT)(t,e),t.prototype.waitForInitializationAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){var e,t,n=this;return(0,H.Jh)(this,function(r){switch(r.label){case 0:var i,o,s,a;return[4,Promise.race([(0,H.mG)(n,void 0,void 0,function(){return(0,H.Jh)(this,function(e){switch(e.label){case 0:return[4,this.initialization];case 1:return e.sent(),[2,!0]}})}),(i=1e3*this.options.maxInitWaitTimeSeconds,o=function(t){return e=t},a=new Promise(function(e){return s=setTimeout(e,i)}),null==o||o(function(){return clearTimeout(s)}),a)])];case 1:return t=r.sent(),e(),[2,!!t]}})})},t.prototype.getConfig=function(){return(0,H.mG)(this,void 0,void 0,function(){var e;function t(e){e.debug("AutoPollConfigService.getConfig() - returning value from cache.")}return(0,H.Jh)(this,function(n){switch(n.label){case 0:if(this.options.logger.debug("AutoPollConfigService.getConfig() called."),e=null,!(!this.isOffline&&!this.initialized))return[3,3];return[4,this.options.cache.get(this.options.getCacheKey())];case 1:if(e=n.sent(),!J.isExpired(e,1e3*this.options.pollIntervalSeconds))return t(this.options.logger),[2,e];return this.options.logger.debug("AutoPollConfigService.getConfig() - cache is empty or expired, waiting for initialization."),[4,this.waitForInitializationAsync()];case 2:n.sent(),n.label=3;case 3:return[4,this.options.cache.get(this.options.getCacheKey())];case 4:return e=n.sent(),J.isExpired(e,1e3*this.options.pollIntervalSeconds)?this.options.logger.debug("AutoPollConfigService.getConfig() - cache is empty or expired."):t(this.options.logger),[2,e]}})})},t.prototype.refreshConfigAsync=function(){return this.options.logger.debug("AutoPollConfigService.refreshConfigAsync() called."),e.prototype.refreshConfigAsync.call(this)},t.prototype.dispose=function(){this.options.logger.debug("AutoPollConfigService.dispose() called."),e.prototype.dispose.call(this),this.timerId&&this.stopRefreshWorker()},t.prototype.onConfigUpdated=function(t){e.prototype.onConfigUpdated.call(this,t),this.signalInitialization()},t.prototype.onConfigChanged=function(t){e.prototype.onConfigChanged.call(this,t),this.options.configChanged()},t.prototype.setOnlineCore=function(){this.startRefreshWorker(1e3*this.options.pollIntervalSeconds)},t.prototype.setOfflineCore=function(){this.stopRefreshWorker()},t.prototype.startRefreshWorker=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n=this;return(0,H.Jh)(this,function(r){switch(r.label){case 0:return this.options.logger.debug("AutoPollConfigService.startRefreshWorker() called."),[4,this.options.cache.get(this.options.getCacheKey())];case 1:if(t=r.sent(),!J.isExpired(t,1e3*this.options.pollIntervalSeconds))return[3,4];if(this.isOfflineExactly)return[3,3];return[4,this.refreshConfigCoreAsync(t)];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:this.signalInitialization(),r.label=5;case 5:return this.options.logger.debug("AutoPollConfigService.startRefreshWorker() - calling refreshWorkerLogic()'s setTimeout."),this.timerId=setTimeout(function(e){return n.refreshWorkerLogic(e)},e,e),[2]}})})},t.prototype.stopRefreshWorker=function(){this.options.logger.debug("AutoPollConfigService.stopRefreshWorker() - clearing setTimeout."),clearTimeout(this.timerId)},t.prototype.refreshWorkerLogic=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n=this;return(0,H.Jh)(this,function(r){switch(r.label){case 0:if(this.disposed)return this.options.logger.debug("AutoPollConfigService.refreshWorkerLogic() - called on a disposed client."),[2];if(this.options.logger.debug("AutoPollConfigService.refreshWorkerLogic() - called."),this.isOffline)return[3,3];return[4,this.options.cache.get(this.options.getCacheKey())];case 1:return t=r.sent(),[4,this.refreshConfigCoreAsync(t)];case 2:r.sent(),r.label=3;case 3:return this.options.logger.debug("AutoPollConfigService.refreshWorkerLogic() - calling refreshWorkerLogic()'s setTimeout."),this.timerId=setTimeout(function(e){return n.refreshWorkerLogic(e)},e,e),[2]}})})},t}(en),ea=function(){function e(){this.cache={}}return e.prototype.set=function(e,t){this.cache[e]=t},e.prototype.get=function(e){var t;return null!==(t=this.cache[e])&&void 0!==t?t:null},e}();(p=S||(S={}))[p.Debug=4]="Debug",p[p.Info=3]="Info",p[p.Warn=2]="Warn",p[p.Error=1]="Error",p[p.Off=-1]="Off";var ec=function(){function e(e,t){this.logger=e,this.hooks=t}return Object.defineProperty(e.prototype,"level",{get:function(){var e;return null!==(e=this.logger.level)&&void 0!==e?e:S.Warn},enumerable:!1,configurable:!0}),e.prototype.log=function(e){this.info(e)},e.prototype.debug=function(e){this.isLogLevelEnabled(S.Debug)&&this.logger.debug(e)},e.prototype.info=function(e){this.isLogLevelEnabled(S.Info)&&this.logger.info(e)},e.prototype.warn=function(e){this.isLogLevelEnabled(S.Warn)&&this.logger.warn(e)},e.prototype.error=function(e,t){var n;if(this.isLogLevelEnabled(S.Error)){var r=t?e+"\n"+eo(t,!0):e;this.logger.error(r)}null===(n=this.hooks)||void 0===n||n.emit("clientError",e,t)},e.prototype.isLogLevelEnabled=function(e){return this.level>=e},e}(),eu=function(){function e(e){void 0===e&&(e=S.Warn),this.level=e,this.SOURCE="ConfigCat"}return e.prototype.log=function(e){this.info(e)},e.prototype.debug=function(e){console.info(this.SOURCE+" - DEBUG - "+e)},e.prototype.info=function(e){console.info(this.SOURCE+" - INFO - "+e)},e.prototype.warn=function(e){console.warn(this.SOURCE+" - WARN - "+e)},e.prototype.error=function(e){console.error(this.SOURCE+" - ERROR - "+e)},e}(),el=function(){function e(){this.events={},this.eventCount=0,this.addListener=this.on,this.off=this.removeListener}return e.prototype.addListenerCore=function(e,t,n){if("function"!=typeof t)throw TypeError("Listener must be a function");var r=this.events[e],i={fn:t,once:n};return r?r.fn?this.events[e]=[r,i]:r.push(i):(this.events[e]=i,this.eventCount++),this},e.prototype.removeListenerCore=function(e,t,n){var r=this.events[e];if(!r)return this;if(r.fn)n(r,t)&&this.removeEvent(e);else for(var i=r.length-1;i>=0;i--)if(n(r[i],t)){r.splice(i,1),r.length?1===r.length&&(this.events[e]=r[0]):this.removeEvent(e);break}return this},e.prototype.removeEvent=function(e){0==--this.eventCount?this.events={}:delete this.events[e]},e.prototype.on=function(e,t){return this.addListenerCore(e,t,!1)},e.prototype.once=function(e,t){return this.addListenerCore(e,t,!0)},e.prototype.removeListener=function(e,t){if("function"!=typeof t)throw TypeError("Listener must be a function");return this.removeListenerCore(e,t,function(e,t){return e.fn===t})},e.prototype.removeAllListeners=function(e){return e?this.events[e]&&this.removeEvent(e):(this.events={},this.eventCount=0),this},e.prototype.listeners=function(e){var t=this.events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=t.length,r=Array(n),i=0;i<n;i++)r[i]=t[i].fn;return r},e.prototype.listenerCount=function(e){var t=this.events[e];return t?t.fn?1:t.length:0},e.prototype.eventNames=function(){var e,t=[];if(0===this.eventCount)return t;for(var n in e=this.events)e.hasOwnProperty(n)&&t.push(n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t},e.prototype.emit=function(e,t,n,r,i){for(var o,s,a,c,u=[],l=5;l<arguments.length;l++)u[l-5]=arguments[l];var h=this.events[e];if(!h)return!1;h.fn?(a=(o=[h,1])[0],c=o[1]):(a=(s=[(h=h.slice())[0],h.length])[0],c=s[1]);for(var f=arguments.length-1,p=0;;){switch(a.once&&this.removeListenerCore(e,a,function(e,t){return e===t}),f){case 0:a.fn.call(this);break;case 1:a.fn.call(this,t);break;case 2:a.fn.call(this,t,n);break;case 3:a.fn.call(this,t,n,r);break;case 4:a.fn.call(this,t,n,r,i);break;default:for(var d=Array(f),g=0;g<f;g++)d[g]=arguments[g+1];a.fn.apply(this,d)}if(++p>=c)break;a=h[p]}return!0},e}(),eh=new(function(){function e(){this.addListener=this.on,this.off=this.removeListener}return e.prototype.on=function(){return this},e.prototype.once=function(){return this},e.prototype.removeListener=function(){return this},e.prototype.removeAllListeners=function(){return this},e.prototype.listeners=function(){return[]},e.prototype.listenerCount=function(){return 0},e.prototype.eventNames=function(){return[]},e.prototype.emit=function(){return!1},e}()),ef=function(){function e(e){this.addListener=this.on,this.off=this.removeListener,this.eventEmitter=e}return e.prototype.tryDisconnect=function(){var e=this.eventEmitter;return this.eventEmitter=eh,e!==eh},e.prototype.on=function(e,t){return this.eventEmitter.on(e,t),this},e.prototype.once=function(e,t){return this.eventEmitter.once(e,t),this},e.prototype.removeListener=function(e,t){return this.eventEmitter.removeListener(e,t),this},e.prototype.removeAllListeners=function(e){return this.eventEmitter.removeAllListeners(e),this},e.prototype.listeners=function(e){return this.eventEmitter.listeners(e)},e.prototype.listenerCount=function(e){return this.eventEmitter.listenerCount(e)},e.prototype.eventNames=function(){return this.eventEmitter.eventNames()},e.prototype.emit=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=this.eventEmitter).emit.apply(t,(0,H.ev)([e],n,!1))},e}();(d=w||(w={}))[d.AutoPoll=0]="AutoPoll",d[d.LazyLoad=1]="LazyLoad",d[d.ManualPoll=2]="ManualPoll",(g=T||(T={}))[g.Global=0]="Global",g[g.EuOnly=1]="EuOnly";var ep=function(){function e(e,t,n,r,i){if(this.configFileName="config_v5",this.requestTimeoutMs=3e4,this.baseUrlOverriden=!1,this.proxy="",this.offline=!1,!e)throw Error("Invalid 'apiKey' value");(r||(r=new ea),this.apiKey=e,this.clientVersion=t,this.dataGovernance=null!==(o=null==n?void 0:n.dataGovernance)&&void 0!==o?o:T.Global,this.cache=r,this.dataGovernance===T.EuOnly)?this.baseUrl="https://cdn-eu.configcat.com":this.baseUrl="https://cdn-global.configcat.com";var o,s,a,c,u=null!==(s=null==i?void 0:i())&&void 0!==s?s:new el;if(this.hooks=new ef(u),n){if(c=n.logger,n.requestTimeoutMs){if(n.requestTimeoutMs<0)throw Error("Invalid 'requestTimeoutMs' value");this.requestTimeoutMs=n.requestTimeoutMs}n.baseUrl&&(this.baseUrl=n.baseUrl,this.baseUrlOverriden=!0),n.proxy&&(this.proxy=n.proxy),n.cache&&(this.cache=n.cache),n.flagOverrides&&(this.flagOverrides=n.flagOverrides),n.defaultUser&&(this.defaultUser=n.defaultUser),n.offline&&(this.offline=n.offline),null===(a=n.setupHooks)||void 0===a||a.call(n,this.hooks)}this.logger=new ec(null!=c?c:new eu,this.hooks)}return e.prototype.getUrl=function(){return this.baseUrl+"/configuration-files/"+this.apiKey+"/"+this.configFileName+".json?sdk="+this.clientVersion},e.prototype.getCacheKey=function(){return"js_"+this.configFileName+"_"+this.apiKey},e}(),ed=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n+"/a-"+r,i,o,s)||this;if(a.pollIntervalSeconds=60,a.configChanged=function(){},a.maxInitWaitTimeSeconds=5,i&&(void 0!==i.pollIntervalSeconds&&null!==i.pollIntervalSeconds&&(a.pollIntervalSeconds=i.pollIntervalSeconds),i.configChanged&&(a.configChanged=i.configChanged),void 0!==i.maxInitWaitTimeSeconds&&null!==i.maxInitWaitTimeSeconds&&(a.maxInitWaitTimeSeconds=i.maxInitWaitTimeSeconds)),!(a.pollIntervalSeconds>=1&&"number"==typeof a.pollIntervalSeconds))throw Error("Invalid 'pollIntervalSeconds' value");if(!(a.maxInitWaitTimeSeconds>=0&&"number"==typeof a.maxInitWaitTimeSeconds))throw Error("Invalid 'maxInitWaitTimeSeconds' value");return a}return(0,H.ZT)(t,e),t}(ep),eg=function(e){function t(t,n,r,i,o,s){return e.call(this,t,n+"/m-"+r,i,o,s)||this}return(0,H.ZT)(t,e),t}(ep),e_=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n+"/l-"+r,i,o,s)||this;if(a.cacheTimeToLiveSeconds=60,i&&i.cacheTimeToLiveSeconds&&(a.cacheTimeToLiveSeconds=i.cacheTimeToLiveSeconds),!a.cacheTimeToLiveSeconds||a.cacheTimeToLiveSeconds<1)throw Error("Invalid 'cacheTimeToLiveSeconds' value. Value must be greater than zero.");return a}return(0,H.ZT)(t,e),t}(ep);(_=O||(O={}))[_.LocalOnly=0]="LocalOnly",_[_.LocalOverRemote=1]="LocalOverRemote",_[_.RemoteOverLocal=2]="RemoteOverLocal",(function(e){this.map={},this.map=Object.fromEntries(Object.entries(e).map(function(e){return[e[0],{value:e[1],variationId:"",rolloutRules:[],rolloutPercentageItems:[]}]}))}).prototype.getOverrides=function(){return Promise.resolve(this.map)};var ev=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.cacheTimeToLiveSeconds=n.cacheTimeToLiveSeconds,n.hooks.emit("clientReady"),r}return(0,H.ZT)(t,e),t.prototype.getConfig=function(){return(0,H.mG)(this,void 0,void 0,function(){var e;function t(e,t){void 0===t&&(t=""),e.debug("LazyLoadConfigService.getConfig(): cache is empty or expired".concat(t,"."))}return(0,H.Jh)(this,function(n){switch(n.label){case 0:return this.options.logger.debug("LazyLoadConfigService.getConfig() called."),[4,this.options.cache.get(this.options.getCacheKey())];case 1:if(e=n.sent(),!J.isExpired(e,1e3*this.cacheTimeToLiveSeconds))return[3,5];if(this.isOffline)return[3,3];return t(this.options.logger,", calling refreshConfigCoreAsync()"),[4,this.refreshConfigCoreAsync(e)];case 2:return e=n.sent()[1],[3,4];case 3:t(this.options.logger),n.label=4;case 4:return[2,e];case 5:return this.options.logger.debug("LazyLoadConfigService.getConfig(): cache is valid, returning from cache."),[2,e]}})})},t.prototype.refreshConfigAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){return(0,H.Jh)(this,function(t){return this.options.logger.debug("LazyLoadConfigService.refreshConfigAsync() called."),[2,e.prototype.refreshConfigAsync.call(this)]})})},t}(en),ey=function(e){function t(t,n){var r=e.call(this,t,n)||this;return n.hooks.emit("clientReady"),r}return(0,H.ZT)(t,e),t.prototype.getConfig=function(){return(0,H.mG)(this,void 0,void 0,function(){return(0,H.Jh)(this,function(e){switch(e.label){case 0:return this.options.logger.debug("ManualPollService.getConfig() called."),[4,this.options.cache.get(this.options.getCacheKey())];case 1:return[2,e.sent()]}})})},t.prototype.refreshConfigAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){return(0,H.Jh)(this,function(t){return this.options.logger.debug("ManualPollService.refreshConfigAsync() called."),[2,e.prototype.refreshConfigAsync.call(this)]})})},t}(en),em=/^[0-9]+$/,eE=function(e,t){var n=em.test(e),r=em.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},eb=Number.MAX_SAFE_INTEGER||9007199254740991,eS=[],ew=[],eT={},eO=0,eC=function(e,t){var n=eO++;eT[e]=n,ew[n]=t,eS[n]=new RegExp(t)};eC("NUMERICIDENTIFIER","0|[1-9]\\d*"),eC("NUMERICIDENTIFIERLOOSE","[0-9]+"),eC("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),eC("MAINVERSION","(".concat(ew[eT.NUMERICIDENTIFIER],")\\.")+"(".concat(ew[eT.NUMERICIDENTIFIER],")\\.")+"(".concat(ew[eT.NUMERICIDENTIFIER],")")),eC("MAINVERSIONLOOSE","(".concat(ew[eT.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(ew[eT.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(ew[eT.NUMERICIDENTIFIERLOOSE],")")),eC("PRERELEASEIDENTIFIER","(?:".concat(ew[eT.NUMERICIDENTIFIER],"|").concat(ew[eT.NONNUMERICIDENTIFIER],")")),eC("PRERELEASEIDENTIFIERLOOSE","(?:".concat(ew[eT.NUMERICIDENTIFIERLOOSE],"|").concat(ew[eT.NONNUMERICIDENTIFIER],")")),eC("PRERELEASE","(?:-(".concat(ew[eT.PRERELEASEIDENTIFIER],"(?:\\.").concat(ew[eT.PRERELEASEIDENTIFIER],")*))")),eC("PRERELEASELOOSE","(?:-?(".concat(ew[eT.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(ew[eT.PRERELEASEIDENTIFIERLOOSE],")*))")),eC("BUILDIDENTIFIER","[0-9A-Za-z-]+"),eC("BUILD","(?:\\+(".concat(ew[eT.BUILDIDENTIFIER],"(?:\\.").concat(ew[eT.BUILDIDENTIFIER],")*))")),eC("FULLPLAIN","v?".concat(ew[eT.MAINVERSION]).concat(ew[eT.PRERELEASE],"?").concat(ew[eT.BUILD],"?")),eC("FULL","^".concat(ew[eT.FULLPLAIN],"$")),eC("LOOSEPLAIN","[v=\\s]*".concat(ew[eT.MAINVERSIONLOOSE]).concat(ew[eT.PRERELEASELOOSE],"?").concat(ew[eT.BUILD],"?")),eC("LOOSE","^".concat(ew[eT.LOOSEPLAIN],"$"));var eR=function(){function e(t,n){if(n&&"object"==typeof n||(n={loose:!!n,includePrerelease:!1}),t instanceof e){if(!!n.loose===t.loose&&!!n.includePrerelease===t.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw TypeError("Invalid Version: ".concat(t));if(t.length>256)throw TypeError("version is longer than ".concat(256," characters"));this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?eS[eT.LOOSE]:eS[eT.FULL]);if(!r)throw TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>eb||this.major<0)throw TypeError("Invalid major version");if(this.minor>eb||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>eb||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<eb)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}return e.prototype.format=function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version},e.prototype.toString=function(){return this.version},e.prototype.compare=function(t){if(!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)},e.prototype.compareMain=function(t){return t instanceof e||(t=new e(t,this.options)),eE(this.major,t.major)||eE(this.minor,t.minor)||eE(this.patch,t.patch)},e.prototype.comparePre=function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;if(r===i)continue;else return eE(r,i)}while(++n)},e.prototype.compareBuild=function(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;if(r===i)continue;else return eE(r,i)}while(++n)},e.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this},e}(),eI=function(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof eR)return e;if("string"!=typeof e||e.length>256||!(t.loose?eS[eT.LOOSE]:eS[eT.FULL]).test(e))return null;try{return new eR(e,t)}catch(e){return null}},eA=function(e,t,n){return new eR(e,n).compare(new eR(t,n))},eN=function(e){var t=eI(e,!1);return t?t.version:null};function ek(e){function t(e,t){return e<<t|e>>>32-t}function n(e){for(var t="",n=7;n>=0;n--)t+=(e>>>4*n&15).toString(16);return t}var r,i,o,s,a,c,u,l,h,f=Array(80),p=1732584193,d=4023233417,g=2562383102,_=271733878,v=3285377520,y=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?t+=String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):t+=String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128)}return t}(e)).length,m=[];for(i=0;i<y-3;i+=4)o=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),m.push(o);switch(y%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(y-1)<<24|8388608;break;case 2:i=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:i=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(m.push(i);m.length%16!=14;)m.push(0);for(m.push(y>>>29),m.push(y<<3&4294967295),r=0;r<m.length;r+=16){for(i=0;i<16;i++)f[i]=m[r+i];for(i=16;i<=79;i++)f[i]=t(f[i-3]^f[i-8]^f[i-14]^f[i-16],1);for(i=0,s=p,a=d,c=g,u=_,l=v;i<=19;i++)h=t(s,5)+(a&c|~a&u)+l+f[i]+1518500249&4294967295,l=u,u=c,c=t(a,30),a=s,s=h;for(i=20;i<=39;i++)h=t(s,5)+(a^c^u)+l+f[i]+1859775393&4294967295,l=u,u=c,c=t(a,30),a=s,s=h;for(i=40;i<=59;i++)h=t(s,5)+(a&c|a&u|c&u)+l+f[i]+2400959708&4294967295,l=u,u=c,c=t(a,30),a=s,s=h;for(i=60;i<=79;i++)h=t(s,5)+(a^c^u)+l+f[i]+3395469782&4294967295,l=u,u=c,c=t(a,30),a=s,s=h;p=p+s&4294967295,d=d+a&4294967295,g=g+c&4294967295,_=_+u&4294967295,v=v+l&4294967295}return(n(p)+n(d)+n(g)+n(_)+n(v)).toLowerCase()}var ex=function(){function e(e){this.logger=e}return e.prototype.Evaluate=function(e,t,n,r,i){this.logger.debug("RolloutEvaluator.Evaluate() called.");var o,s=new eD;s.User=r,s.KeyName=t,s.ReturnValue=n;try{if(r){if(o=this.EvaluateRules(e.rolloutRules,r,s),null!==o||(o=this.EvaluatePercentageRules(e.rolloutPercentageItems,t,r),e.rolloutPercentageItems&&e.rolloutPercentageItems.length>0&&s.OpAppendLine("Evaluating % options => "+(o?"user targeted":"user not targeted")),null!==o))return s.ReturnValue=o.value,eL(t,o,ei(i),r)}else if(e.rolloutRules&&e.rolloutRules.length>0||e.rolloutPercentageItems&&e.rolloutPercentageItems.length>0){var a="Evaluating getValue('"+t+"'). ";a+="UserObject missing! You should pass a UserObject to getValue(), in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object",this.logger.warn(a)}return o={value:e.value,variationId:e.variationId},s.ReturnValue=o.value,eL(t,o,ei(i),r)}finally{this.logger.info(s.GetLog())}},e.prototype.EvaluateRules=function(e,t,n){if(this.logger.debug("RolloutEvaluator.EvaluateRules() called."),e&&e.length>0)for(var r=this,i=0;i<e.length;i++){var o=function(i){var o=e[i],s=r.GetUserAttribute(t,o.comparisonAttribute),a=o.comparator,c=o.comparisonValue,u="Evaluating rule: '"+s+"' "+r.RuleToString(a)+" '"+c+"' => ";if(!s)return u+="NO MATCH (Attribute is not defined on the user object)",n.OpAppendLine(u),"continue";var l={value:o.value,variationId:o.variationId,matchedRule:o};switch(a){case 0:for(var h=c.split(","),f=0;f<h.length;f++)if(h[f].trim()===s)return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 1:if(!c.split(",").some(function(e){return e.trim()===s}))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 2:if(-1!==s.indexOf(c))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 3:if(-1===s.indexOf(c))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 4:case 5:case 6:case 7:case 8:case 9:if(r.EvaluateSemver(s,c,a))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 10:case 11:case 12:case 13:case 14:case 15:if(r.EvaluateNumber(s,c,a))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 16:for(var p=c.split(","),f=0;f<p.length;f++)if(p[f].trim()===ek(s))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match";break;case 17:if(!c.split(",").some(function(e){return e.trim()===ek(s)}))return u+="MATCH",n.OpAppendLine(u),{value:l};u+="no match"}n.OpAppendLine(u)}(i);if("object"==typeof o)return o.value}return null},e.prototype.EvaluatePercentageRules=function(e,t,n){if(this.logger.debug("RolloutEvaluator.EvaluateVariations() called."),e&&e.length>0)for(var r=parseInt(ek(t+(null===n.identifier||void 0===n.identifier?"":n.identifier)).substring(0,7),16)%100,i=0,o=0;o<e.length;o++){var s=e[o];if(r<(i+=+s.percentage))return{value:s.value,variationId:s.variationId,matchedRule:s}}return null},e.prototype.EvaluateNumber=function(e,t,n){var r,i;if(this.logger.debug("RolloutEvaluator.EvaluateNumber() called."),!e||Number.isNaN(Number.parseFloat(e.replace(",",".")))||(r=Number.parseFloat(e.replace(",",".")),!t||Number.isNaN(Number.parseFloat(t.replace(",",".")))))return!1;switch(i=Number.parseFloat(t.replace(",",".")),n){case 10:return r==i;case 11:return r!=i;case 12:return r<i;case 13:return r<=i;case 14:return r>i;case 15:return r>=i}return!1},e.prototype.EvaluateSemver=function(e,t,n){if(this.logger.debug("RolloutEvaluator.EvaluateSemver() called."),null==eN(e)||er(t))return!1;switch(t=t.trim(),n){case 4:for(var r=t.split(","),i=!1,o=0;o<r.length;o++)if(!(!r[o]||er(r[o]))&&""!==r[o].trim()){if(null==eN(r[o].trim()))return!1;i||(i=0===eA(e,r[o].trim(),!0))}return i;case 5:return!t.split(",").some(function(t){return!(!t||er(t))&&""!==t.trim()&&null!=(t=eN(t.trim()))&&0===eA(e,t,!1)});case 6:if(null==eN(t))break;return 0>eA(e,t,!1);case 7:if(null==eN(t))break;return 0>=eA(e,t,!1);case 8:if(null==eN(t))break;return eA(e,t,!1)>0;case 9:if(null==eN(t))break;return eA(e,t,!1)>=0}return!1},e.prototype.GetUserAttribute=function(e,t){switch(t){case"Identifier":return e.identifier;case"Email":return e.email;case"Country":return e.country;default:return(e.custom||{})[t]}},e.prototype.RuleToString=function(e){switch(e){case 0:return"IS ONE OF";case 1:return"IS NOT ONE OF";case 2:return"CONTAINS";case 3:return"DOES NOT CONTAIN";case 4:return"IS ONE OF (SemVer)";case 5:return"IS NOT ONE OF (SemVer)";case 6:return"< (SemVer)";case 7:return"<= (SemVer)";case 8:return"> (SemVer)";case 9:return">= (SemVer)";case 10:return"= (Number)";case 11:return"!= (Number)";case 12:return"< (Number)";case 13:return"<= (Number)";case 14:return"> (Number)";case 15:return">= (Number)";case 16:return"IS ONE OF (Sensitive)";case 17:return"IS NOT ONE OF (Sensitive)";default:return e}},e}(),eD=function(){function e(){this.Operations=""}return e.prototype.OpAppendLine=function(e){this.Operations+=" "+e+"\n"},e.prototype.GetLog=function(){return"Evaluate '"+this.KeyName+"'\n User : "+JSON.stringify(this.User)+"\n"+this.Operations+" Returning value : "+this.ReturnValue},e}();function eL(e,t,n,r){return{key:e,value:t.value,variationId:t.variationId,fetchTime:n,user:r,isDefaultValue:!1,matchedEvaluationRule:t.matchedRule instanceof Q?t.matchedRule:void 0,matchedEvaluationPercentageRule:t.matchedRule instanceof ee?t.matchedRule:void 0}}function eP(e,t,n,r,i,o){return{key:e,value:t,fetchTime:n,user:r,isDefaultValue:!0,errorMessage:i,errorException:o}}function eU(e,t,n,r,i,o){return{key:e,value:null,variationId:t,fetchTime:n,user:r,isDefaultValue:!0,errorMessage:i,errorException:o}}function ej(e,t,n,r,i,o,s){if(!t)return a="config.json is not present. Returning default value: '".concat(r,"'."),s.error(a),eP(n,r,ei(o),i,a);var a,c=t[n];if(!c)return a="Evaluating '".concat(n,"' failed (key was not found in config.json). Returning default value: '").concat(r,"'. These are the available keys: ").concat(eY(t),"."),s.error(a),eP(n,r,ei(o),i,a);e$(r);var u=e.Evaluate(c,n,r,i,o);if(null!=r&&typeof r!=typeof u.value)throw Error("The type of a setting must match the type of the given default value.\nThe setting's type was ".concat(typeof r,", the given default value's type was ").concat(typeof u.value,".\nPlease pass a corresponding default value type."));return u}function eG(e,t,n,r,i,o){if(!eB(t,i,", returning empty array"))return[[],s];for(var s,a=[],c=0,u=0,l=Object.entries(t);u<l.length;u++){var h=l[u],f=h[0],p=h[1],d=void 0;try{d=e.Evaluate(p,f,null,n,r)}catch(e){null!=s||(s=[]),s.push(e),d=o(f,ei(r),n,e)}a[c++]=d}return[a,s]}function eM(e,t,n,r,i){return eG(e,t,n,r,i,function(e,t,n,r){return eP(e,null,t,n,eo(r),r)})}function eB(e,t,n){return void 0===n&&(n=""),!!e||(t.error("config.json is not present".concat(n)),!1)}function e$(e){if(null!=e){var t=typeof e;if("boolean"!==t&&"number"!==t&&"string"!==t)throw Error("The default value must be boolean, number, string, null or undefined.")}}function eY(e){return Object.keys(e).join()}var eF=new(function(){function e(){this.instances={}}return e.prototype.getOrCreate=function(e,t){var n,r=this.instances[e.apiKey];if(r&&(n=r[0].deref()))return[n,!0];var i={};return n=new eV(e,t,i),this.instances[e.apiKey]=[new WeakRef(n),i],[n,!1]},e.prototype.remove=function(e,t){var n=this.instances[e];if(n){var r=n[0],i=n[1],o=!!r.deref();if(!o||i===t)return delete this.instances[e],o}return!1},e.prototype.clear=function(){for(var e=[],t=0,n=Object.entries(this.instances);t<n.length;t++){var r=n[t],i=r[0],o=r[1][0].deref();o&&e.push(o),delete this.instances[i]}return e},e}()),eV=function(){function e(e,t,n){var r;if(this.cacheToken=n,this.addListener=this.on,this.off=this.removeListener,!e)throw Error("Invalid 'options' value");if(this.options=e,this.options.logger.debug("Initializing ConfigCatClient. Options: "+JSON.stringify(this.options)),!t)throw Error("Invalid 'configCatKernel' value");if(!t.configFetcher)throw Error("Invalid 'configCatKernel.configFetcher' value");if(e.defaultUser&&this.setDefaultUser(e.defaultUser),this.evaluator=new ex(e.logger),(null===(r=e.flagOverrides)||void 0===r?void 0:r.behaviour)!=O.LocalOnly){var i=e instanceof ed?es:e instanceof eg?ey:e instanceof e_?ev:function(){throw Error("Invalid 'options' value")}();this.configService=new i(t.configFetcher,e)}else this.options.hooks.emit("clientReady");this.suppressFinalize=eH(this,{sdkKey:e.apiKey,cacheToken:n,configService:this.configService,logger:e.logger})}return Object.defineProperty(e,"instanceCache",{get:function(){return eF},enumerable:!1,configurable:!0}),e.get=function(e,t,n,r){if(!e)throw Error("Invalid 'sdkKey' value");var i=new(t===w.AutoPoll?ed:t===w.ManualPoll?eg:t===w.LazyLoad?e_:function(){throw Error("Invalid 'pollingMode' value")}())(e,r.sdkType,r.sdkVersion,n,r.cache,r.eventEmitterFactory),o=eF.getOrCreate(i,r),s=o[0];return o[1]&&n&&i.logger.warn("Client for SDK key '".concat(e,"' is already created and will be reused; configuration action is being ignored.")),s},e.finalize=function(t){var n;null===(n=t.logger)||void 0===n||n.debug("finalize() called"),t.cacheToken&&eF.remove(t.sdkKey,t.cacheToken),e.close(t.configService,t.logger)},e.close=function(e,t,n){null==t||t.debug("close() called"),null==n||n.tryDisconnect(),null==e||e.dispose()},e.prototype.dispose=function(){var t=this.options;t.logger.debug("dispose() called"),this.cacheToken&&eF.remove(t.apiKey,this.cacheToken),e.close(this.configService,t.logger,t.hooks),this.suppressFinalize()},e.disposeAll=function(){for(var t,n=eF.clear(),r=0;r<n.length;r++){var i=n[r];try{e.close(i.configService,i.options.logger,i.options.hooks),i.suppressFinalize()}catch(e){null!=t||(t=[]),t.push(e)}}if(t)throw"undefined"!=typeof AggregateError?AggregateError(t):t.pop()},e.prototype.getValue=function(e,t,n,r){this.options.logger.debug("getValue() called."),this.getValueAsync(e,t,r).then(n)},e.prototype.getValueAsync=function(e,t,n){return(0,H.mG)(this,void 0,void 0,function(){var r,i,o,s,a,c;return(0,H.Jh)(this,function(u){switch(u.label){case 0:this.options.logger.debug("getValueAsync() called."),o=null,null!=n||(n=this.defaultUser),u.label=1;case 1:return u.trys.push([1,3,,4]),e$(t),s=void 0,[4,this.getSettingsAsync()];case 2:return s=(c=u.sent())[0],o=c[1],r=(i=ej(this.evaluator,s,e,t,n,o,this.options.logger)).value,[3,4];case 3:return a=u.sent(),this.options.logger.error("Error occurred in getValueAsync().",a),i=eP(e,t,ei(o),n,eo(a),a),r=t,[3,4];case 4:return this.options.hooks.emit("flagEvaluated",i),[2,r]}})})},e.prototype.getValueDetails=function(e,t,n,r){this.options.logger.debug("getValueDetails() called."),this.getValueDetailsAsync(e,t,r).then(n)},e.prototype.getValueDetailsAsync=function(e,t,n){return(0,H.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,H.Jh)(this,function(c){switch(c.label){case 0:this.options.logger.debug("getValueDetailsAsync() called."),i=null,null!=n||(n=this.defaultUser),c.label=1;case 1:return c.trys.push([1,3,,4]),e$(t),o=void 0,[4,this.getSettingsAsync()];case 2:return o=(a=c.sent())[0],i=a[1],r=ej(this.evaluator,o,e,t,n,i,this.options.logger),[3,4];case 3:return s=c.sent(),this.options.logger.error("Error occurred in getValueDetailsAsync().",s),r=eP(e,t,ei(i),n,eo(s),s),[3,4];case 4:return this.options.hooks.emit("flagEvaluated",r),[2,r]}})})},e.prototype.forceRefresh=function(e){this.options.logger.debug("forceRefresh() called."),this.forceRefreshAsync().then(e)},e.prototype.forceRefreshAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){var e;return(0,H.Jh)(this,function(t){switch(t.label){case 0:if(this.options.logger.debug("forceRefreshAsync() called."),!this.configService)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.configService.refreshConfigAsync()];case 2:return[2,t.sent()[0]];case 3:return e=t.sent(),this.options.logger.error("Error occurred in forceRefreshAsync().",e),[2,et.failure(eo(e),e)];case 4:return[3,6];case 5:return[2,et.failure("Client is configured to use the LocalOnly override behavior, which prevents making HTTP requests.")];case 6:return[2]}})})},e.prototype.getAllKeys=function(e){this.options.logger.debug("getAllKeys() called."),this.getAllKeysAsync().then(e)},e.prototype.getAllKeysAsync=function(){return(0,H.mG)(this,void 0,void 0,function(){var e,t;return(0,H.Jh)(this,function(n){switch(n.label){case 0:this.options.logger.debug("getAllKeysAsync() called."),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(!eB(e=n.sent()[0],this.options.logger,", returning empty array"))return[2,[]];return[2,Object.keys(e)];case 3:return t=n.sent(),this.options.logger.error("Error occurred in getAllKeysAsync().",t),[2,[]];case 4:return[2]}})})},e.prototype.getVariationId=function(e,t,n,r){this.options.logger.debug("getVariationId() called."),this.getVariationIdAsync(e,t,r).then(n)},e.prototype.getVariationIdAsync=function(e,t,n){return(0,H.mG)(this,void 0,void 0,function(){var r,i,o,s,a,c;return(0,H.Jh)(this,function(u){switch(u.label){case 0:this.options.logger.debug("getVariationIdAsync() called."),o=null,null!=n||(n=this.defaultUser),u.label=1;case 1:return u.trys.push([1,3,,4]),s=void 0,[4,this.getSettingsAsync()];case 2:return s=(c=u.sent())[0],o=c[1],r=(i=function(e,t,n,r,i,o,s){if(!t)return a="config.json is not present. Returning default variationId: '".concat(r,"'."),s.error(a),eU(n,r,ei(o),i,a);var a,c=t[n];return c?e.Evaluate(c,n,null,i,o,r):(a="Evaluating '".concat(n,"' failed (key was not found in config.json). Returning default variationId: '").concat(r,"'. These are the available keys: ").concat(eY(t),"."),s.error(a),eU(n,r,ei(o),i,a))}(this.evaluator,s,e,t,n,o,this.options.logger)).variationId,[3,4];case 3:return a=u.sent(),this.options.logger.error("Error occurred in getVariationIdAsync().",a),i=eU(e,t,ei(o),n,eo(a),a),r=t,[3,4];case 4:return this.options.hooks.emit("flagEvaluated",i),[2,r]}})})},e.prototype.getAllVariationIds=function(e,t){this.options.logger.debug("getAllVariationIds() called."),this.getAllVariationIdsAsync(t).then(e)},e.prototype.getAllVariationIdsAsync=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l,h;return(0,H.Jh)(this,function(f){switch(f.label){case 0:this.options.logger.debug("getAllVariationIdsAsync() called."),null!=e||(e=this.defaultUser),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(i=(r=f.sent())[0],o=r[1],s=void 0,n=(h=eG(this.evaluator,i,e,o,this.options.logger,function(e,t,n,r){return eU(e,null,t,n,eo(r),r)}))[0],null==(s=h[1])?void 0:s.length)throw"undefined"!=typeof AggregateError?AggregateError(s):s.pop();return t=n.filter(function(e){return null!=e}).map(function(e){return e.variationId}),[3,4];case 3:return a=f.sent(),this.options.logger.error("Error occurred in getAllVariationIdsAsync().",a),null!=n||(n=[]),t=[],[3,4];case 4:for(c=0,u=n;c<u.length;c++)l=u[c],this.options.hooks.emit("flagEvaluated",l);return[2,t]}})})},e.prototype.getKeyAndValue=function(e,t){this.options.logger.debug("getKeyAndValue() called."),this.getKeyAndValueAsync(e).then(t)},e.prototype.getKeyAndValueAsync=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l,h,f;return(0,H.Jh)(this,function(p){switch(p.label){case 0:this.options.logger.debug("getKeyAndValueAsync() called."),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(!eB(t=p.sent()[0],this.options.logger,", returning null"))return[2,null];for(n=0,r=Object.entries(t);n<r.length;n++){if(o=(i=r[n])[0],e===(s=i[1]).variationId)return[2,new eW(o,s.value)];if((a=t[o].rolloutRules)&&a.length>0){for(c=0;c<a.length;c++)if(e===(u=a[c]).variationId)return[2,new eW(o,u.value)]}if((l=t[o].rolloutPercentageItems)&&l.length>0){for(c=0;c<l.length;c++)if(e===(h=l[c]).variationId)return[2,new eW(o,h.value)]}}return this.options.logger.error("Could not find the setting for the given variation ID: "+e),[3,4];case 3:return f=p.sent(),this.options.logger.error("Error occurred in getKeyAndValueAsync().",f),[3,4];case 4:return[2,null]}})})},e.prototype.getAllValues=function(e,t){this.options.logger.debug("getAllValues() called."),this.getAllValuesAsync(t).then(e)},e.prototype.getAllValuesAsync=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l,h;return(0,H.Jh)(this,function(f){switch(f.label){case 0:this.options.logger.debug("getAllValuesAsync() called."),null!=e||(e=this.defaultUser),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(i=(r=f.sent())[0],o=r[1],s=void 0,n=(h=eM(this.evaluator,i,e,o,this.options.logger))[0],null==(s=h[1])?void 0:s.length)throw"undefined"!=typeof AggregateError?AggregateError(s):s.pop();return t=n.map(function(e){return new eW(e.key,e.value)}),[3,4];case 3:return a=f.sent(),this.options.logger.error("Error occurred in getAllValuesAsync().",a),null!=n||(n=[]),t=[],[3,4];case 4:for(c=0,u=n;c<u.length;c++)l=u[c],this.options.hooks.emit("flagEvaluated",l);return[2,t]}})})},e.prototype.getAllValueDetails=function(e,t){this.options.logger.debug("getAllValueDetails() called."),this.getAllValueDetailsAsync(t).then(e)},e.prototype.getAllValueDetailsAsync=function(e){return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l;return(0,H.Jh)(this,function(h){switch(h.label){case 0:this.options.logger.debug("getAllValueDetailsAsync() called."),null!=e||(e=this.defaultUser),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(r=(n=h.sent())[0],i=n[1],o=void 0,t=(l=eM(this.evaluator,r,e,i,this.options.logger))[0],null==(o=l[1])?void 0:o.length)throw"undefined"!=typeof AggregateError?AggregateError(o):o.pop();return[3,4];case 3:return s=h.sent(),this.options.logger.error("Error occurred in getAllValueDetailsAsync().",s),null!=t||(t=[]),[3,4];case 4:for(a=0,c=t;a<c.length;a++)u=c[a],this.options.hooks.emit("flagEvaluated",u);return[2,t]}})})},e.prototype.setDefaultUser=function(e){this.defaultUser=e},e.prototype.clearDefaultUser=function(){this.defaultUser=void 0},Object.defineProperty(e.prototype,"isOffline",{get:function(){var e,t;return null===(t=null===(e=this.configService)||void 0===e?void 0:e.isOffline)||void 0===t||t},enumerable:!1,configurable:!0}),e.prototype.setOnline=function(){this.configService?this.configService.setOnline():this.options.logger.warn("Client is configured to use the LocalOnly override behavior, thus SetOnline() has no effect.")},e.prototype.setOffline=function(){var e;null===(e=this.configService)||void 0===e||e.setOffline()},e.prototype.getSettingsAsync=function(){var e;return(0,H.mG)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c=this;return(0,H.Jh)(this,function(u){switch(u.label){case 0:if(this.options.logger.debug("getSettingsAsync() called."),t=function(){return(0,H.mG)(c,void 0,void 0,function(){var e,t,n;return(0,H.Jh)(this,function(r){switch(r.label){case 0:return[4,null===(n=this.configService)||void 0===n?void 0:n.getConfig()];case 1:return[2,[(null==(t=null==(e=r.sent())?void 0:e.ConfigJSON)?void 0:t[z.FeatureFlags])?Object.fromEntries(Object.entries(t[z.FeatureFlags]).map(function(e){var t=e[0],n=e[1];return[t,Z.fromJson(n)]})):null,null!=e?e:null]]}})})},!(n=null===(e=this.options)||void 0===e?void 0:e.flagOverrides))return[3,7];return r=void 0,i=void 0,[4,n.dataSource.getOverrides()];case 1:switch(o=u.sent(),n.behaviour){case O.LocalOnly:return[3,2];case O.LocalOverRemote:return[3,3];case O.RemoteOverLocal:return[3,5]}return[3,7];case 2:return[2,[o,null]];case 3:case 5:case 7:return[4,t()];case 4:return r=(s=u.sent())[0],i=s[1],[2,[(0,H.pi)((0,H.pi)({},null!=r?r:{}),o),i]];case 6:return r=(a=u.sent())[0],i=a[1],[2,[(0,H.pi)((0,H.pi)({},o),null!=r?r:{}),i]];case 8:return[2,u.sent()]}})})},e.prototype.on=function(e,t){return this.options.hooks.on(e,t),this},e.prototype.once=function(e,t){return this.options.hooks.once(e,t),this},e.prototype.removeListener=function(e,t){return this.options.hooks.removeListener(e,t),this},e.prototype.removeAllListeners=function(e){return this.options.hooks.removeAllListeners(e),this},e.prototype.listeners=function(e){return this.options.hooks.listeners(e)},e.prototype.listenerCount=function(e){return this.options.hooks.listenerCount(e)},e.prototype.eventNames=function(){return this.options.hooks.eventNames()},e}(),eW=function(e,t){this.settingKey=e,this.settingValue=t},eH=function(e,t){if("undefined"!=typeof FinalizationRegistry){var n=new FinalizationRegistry(function(e){return eV.finalize(e)});eH=function(e,t){var r={};return n.register(e,t,r),function(){return n.unregister(r)}}}else eH=function(){return function(){}};return eH(e,t)};void 0===Object.values&&(Object.values=function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push(e[i])}return t}),void 0===Object.entries&&(Object.entries=function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push([i,e[i]])}return t}),void 0===Object.fromEntries&&(Object.fromEntries=function(e){var t,n={};if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r],o=i[0],s=i[1];n[o]=s}else if("undefined"!=typeof Symbol&&(null==e?void 0:e[Symbol.iterator]))for(var a=e[Symbol.iterator](),c=void 0;c=(t=a.next()).value,!t.done;){var o=c[0],s=c[1];n[o]=s}else throw Error("Object.fromEntries() requires a single iterable argument");return n}),"undefined"==typeof WeakRef&&(function(){if(!v&&!(v="object"==typeof globalThis&&globalThis?globalThis:"object"==typeof self&&self?self:"object"==typeof window&&window?window:"object"==typeof n.g&&n.g?n.g:"function"==typeof Function?Function("return this")():null))throw Error("Global object could not be determined.");return v}().WeakRef=((l=function(e){this.target=e}).prototype.deref=function(){return this.target},l.isFallback=!0,l));var eK=function(){function e(){this.cache={}}return e.prototype.set=function(e,t){this.cache[e]=t;try{localStorage.setItem(e,btoa(JSON.stringify(t)))}catch(e){}},e.prototype.get=function(e){var t=this.cache[e];if(t)return t;try{var n=localStorage.getItem(e);if(n){var r=JSON.parse(atob(n));if((Object.setPrototypeOf||function(e,t){return e.__proto__=t})(r,J.prototype),r)return this.cache[e]=r,r}}catch(e){}return null},e}(),eq=function(){function e(){}return e.prototype.handleStateChange=function(e,t,n){var r;try{if(4===e.readyState){var i=e.status,o=e.statusText;if(200===i){var s=null!==(r=e.getResponseHeader("ETag"))&&void 0!==r?r:void 0;t({statusCode:i,reasonPhrase:o,eTag:s,body:e.responseText})}else i&&t({statusCode:i,reasonPhrase:o})}}catch(e){n(e)}},e.prototype.fetchLogic=function(e,t){var n=this;return new Promise(function(t,r){try{e.logger.debug("HttpConfigFetcher.fetchLogic() called.");var i=new XMLHttpRequest;i.onreadystatechange=function(){return n.handleStateChange(i,t,r)},i.ontimeout=function(){return r(new q("timeout",e.requestTimeoutMs))},i.onabort=function(){return r(new q("abort"))},i.onerror=function(){return r(new q("failure"))},i.open("GET",e.getUrl(),!0),i.timeout=e.requestTimeoutMs,i.send(null)}catch(e){r(e)}})},e}();{let{CONFIG_CAT_SDK_KEY:e}=B();y={configFetcher:new eq,cache:new eK,sdkType:"ConfigCat-JS",sdkVersion:"7.0.1"},r=new eV(new ed(e,y.sdkType,y.sdkVersion,void 0,y.cache,y.eventEmitterFactory),y)}function eJ(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,i]=(0,R.useState)(t);return(0,R.useEffect)(()=>{let n=!1;return r&&r.getValueAsync(e,t).then(e=>{n||i(e)}),()=>{n=!0}},[e,t]),n}async function ez(e){try{await W("shared/analytics/".concat(e),{method:"POST"},B())}catch(e){console.error("Failed to record shared video event.",e)}}function eX(e,t){let n=eJ("share_page_analytics");(0,R.useEffect)(()=>{n&&e&&ez(e)},[...t||[],n])}function eZ(e){return"".concat(e.videoWidth,"x").concat(e.videoHeight)}function eQ(e){return e.duration}function e0(e,t,n){let[r]=(0,R.useState)(performance.now()),i=(0,R.useRef)({canPlay:!1,canPlayThrough:!1,loadedData:!1});return{onCanPlay:o=>{if(!i.current.canPlay){let{currentTarget:s}=o,a=performance.now()-r;I("Watch Page - Can Play",{id:e,name:t,storage:n,time:a,resolution:eZ(s),duration:eQ(s)}),i.current.canPlay=!0}},onCanPlayThrough:o=>{if(!i.current.canPlayThrough){let{currentTarget:s}=o,a=performance.now()-r;I("Watch Page - Can Play Through",{id:e,name:t,storage:n,time:a,resolution:eZ(s),duration:eQ(s)}),i.current.canPlayThrough=!0}},onLoadedData:o=>{if(!i.current.loadedData){let{currentTarget:s}=o;if(!("readyState"in s)||s.readyState>2){let o=performance.now()-r;I("Watch Page - Has Future/Enough Data",{id:e,name:t,storage:n,time:o,resolution:eZ(s),duration:eQ(s)}),i.current.loadedData=!0}}}}}var e1=n(7363);function e2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:640;return'<div style="position:relative;width:fit-content;height:fit-content;">\n            <a style="position:absolute;top:20px;right:1rem;opacity:0.8;" href="'.concat(e,"?").concat((0,e1.p)("embed","embed","watch"),'">\n                <img loading="lazy" style="height:22px;" src="https://clipchamp.com/e.svg" alt="Made with Clipchamp" />\n            </a>\n            <iframe allow="autoplay;" allowfullscreen style="border:none" src="').concat(e,'/embed" width="').concat(Math.round(t),'" height="').concat(Math.round(t*(9/16)),'"></iframe>\n          </div>')}function e4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e,"/").concat(t)}function e3(e){window.gtag&&window.gtag("config",B().GA_TRACKING_ID,{page_path:e})}var e9=n(63);let e7=["debug","info","warn","error","log","assert","trace"];function e6(e){if(!("console"in e9.n2))return e();let t=e9.n2.console,n={};e7.forEach(e=>{let r=t[e]&&t[e].__sentry_original__;e in t&&r&&(n[e]=t[e],t[e]=r)});try{return e()}finally{Object.keys(n).forEach(e=>{t[e]=n[e]})}}function e5(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?e7.forEach(n=>{t[n]=(...t)=>{e&&e6(()=>{e9.n2.console[n](`Sentry Logger [${n}]:`,...t)})}}):e7.forEach(e=>{t[e]=()=>void 0}),t}i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,e9.YO)("logger",e5):e5();let e8=Object.prototype.toString;function te(e){switch(e8.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return tu(e,Error)}}function tt(e,t){return e8.call(e)===`[object ${t}]`}function tn(e){return tt(e,"ErrorEvent")}function tr(e){return tt(e,"DOMError")}function ti(e){return tt(e,"String")}function to(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function ts(e){return tt(e,"Object")}function ta(e){return"undefined"!=typeof Event&&tu(e,Event)}function tc(e){return!!(e&&e.then&&"function"==typeof e.then)}function tu(e,t){try{return e instanceof t}catch(e){return!1}}let tl=(0,e9.Rf)();function th(e,t={}){try{let n,r=e,i=[],o=0,s=0,a=Array.isArray(t)?t:t.keyAttrs,c=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&o++<5&&(n=function(e,t){let n,r,i,o,s;let a=[];if(!e||!e.tagName)return"";a.push(e.tagName.toLowerCase());let c=t&&t.length?t.filter(t=>e.getAttribute(t)).map(t=>[t,e.getAttribute(t)]):null;if(c&&c.length)c.forEach(e=>{a.push(`[${e[0]}="${e[1]}"]`)});else if(e.id&&a.push(`#${e.id}`),(n=e.className)&&ti(n))for(s=0,r=n.split(/\s+/);s<r.length;s++)a.push(`.${r[s]}`);let u=["aria-label","type","name","title","alt"];for(s=0;s<u.length;s++)i=u[s],(o=e.getAttribute(i))&&a.push(`[${i}="${o}"]`);return a.join("")}(r,a),"html"!==n&&(!(o>1)||!(s+3*i.length+n.length>=c)));)i.push(n),s+=n.length,r=r.parentNode;return i.reverse().join(" > ")}catch(e){return"<unknown>"}}function tf(e,t=0){return"string"!=typeof e||0===t?e:e.length<=t?e:`${e.slice(0,t)}...`}function tp(e,t){if(!Array.isArray(e))return"";let n=[];for(let t=0;t<e.length;t++){let r=e[t];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function td(e,t=[],n=!1){return t.some(t=>(function(e,t,n=!1){return!!ti(e)&&(tt(t,"RegExp")?t.test(e):!!ti(t)&&(n?e===t:e.includes(t)))})(e,t,n))}function tg(e,t,n){if(!(t in e))return;let r=e[t],i=n(r);if("function"==typeof i)try{tv(i,r)}catch(e){}e[t]=i}function t_(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function tv(e,t){let n=t.prototype||{};e.prototype=t.prototype=n,t_(e,"__sentry_original__",t)}function ty(e){return e.__sentry_original__}function tm(e){if(te(e))return{message:e.message,name:e.name,stack:e.stack,...tb(e)};if(!ta(e))return e;{let t={type:e.type,target:tE(e.target),currentTarget:tE(e.currentTarget),...tb(e)};return"undefined"!=typeof CustomEvent&&tu(e,CustomEvent)&&(t.detail=e.detail),t}}function tE(e){try{return"undefined"!=typeof Element&&tu(e,Element)?th(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function tb(e){if("object"!=typeof e||null===e)return{};{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}function tS(e){let t=new Map;return function e(t,n){if(ts(t)){let r=n.get(t);if(void 0!==r)return r;let i={};for(let r of(n.set(t,i),Object.keys(t)))void 0!==t[r]&&(i[r]=e(t[r],n));return i}if(Array.isArray(t)){let r=n.get(t);if(void 0!==r)return r;let i=[];return n.set(t,i),t.forEach(t=>{i.push(e(t,n))}),i}return t}(e,t)}function tw(){let e=e9.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");let n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&n())>>e/4).toString(16))}function tT(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function tO(e){let{message:t,event_id:n}=e;if(t)return t;let r=tT(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function tC(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function tR(e,t){let n=tT(e);if(!n)return;let r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){let e={...r&&r.data,...t.data};n.mechanism.data=e}}function tI(e){if(e&&e.__sentry_captured__)return!0;try{t_(e,"__sentry_captured__",!0)}catch(e){}return!1}function tA(e){return Array.isArray(e)?e:[e]}let tN=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],tk=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class tx{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=tx.id,this._options=e}setupOnce(e,t){let n=e=>{let n=t();if(n){let t=n.getIntegration(tx);if(t){var r;let o=n.getClient(),s=o?o.getOptions():{},a=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:tN],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:tk],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,s);return(a.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Event dropped due to being internal Sentry Error.
Event: ${tO(e)}`),0):(r=a.ignoreErrors,!e.type&&r&&r.length&&(function(e){if(e.message)return[e.message];if(e.exception){let{values:t}=e.exception;try{let{type:e="",value:n=""}=t&&t[t.length-1]||{};return[`${n}`,`${e}: ${n}`]}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error(`Cannot extract message for event ${tO(e)}`)}}return[]})(e).some(e=>td(e,r)))?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${tO(e)}`),0):!function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;let n=e.transaction;return!!n&&td(n,t)}(e,a.ignoreTransactions)?!function(e,t){if(!t||!t.length)return!1;let n=tD(e);return!!n&&td(n,t)}(e,a.denyUrls)?function(e,t){if(!t||!t.length)return!0;let n=tD(e);return!n||td(n,t)}(e,a.allowUrls)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${tO(e)}.
Url: ${tD(e)}`),0):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${tO(e)}.
Url: ${tD(e)}`),0):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${tO(e)}`),0))?e:null}}return e};n.id=this.name,e(n)}}function tD(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error(`Cannot extract url for event ${tO(e)}`),null}}tx.__initStatic();class tL{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=tL.id}setupOnce(){o=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=ty(this)||this;return o.apply(t,e)}}catch(e){}}}tL.__initStatic();var tP=n(7790);let tU="production";function tj(e){return new tM(t=>{t(e)})}function tG(e){return new tM((t,n)=>{n(e)})}(m=C||(C={}))[m.PENDING=0]="PENDING",m[m.RESOLVED=1]="RESOLVED",m[m.REJECTED=2]="REJECTED";class tM{constructor(e){tM.prototype.__init.call(this),tM.prototype.__init2.call(this),tM.prototype.__init3.call(this),tM.prototype.__init4.call(this),this._state=C.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new tM((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new tM((t,n)=>{let r,i;return this.then(t=>{i=!1,r=t,e&&e()},t=>{i=!0,r=t,e&&e()}).then(()=>{if(i){n(r);return}t(r)})})}__init(){this._resolve=e=>{this._setResult(C.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(C.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{if(this._state===C.PENDING){if(tc(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===C.PENDING)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===C.RESOLVED&&e[1](this._value),this._state===C.REJECTED&&e[2](this._value),e[0]=!0)})}}}function tB(e,t={}){if(!t.user||(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,tP.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:tw()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class t${constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=tV()}static clone(e){let t=new t$;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&tB(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){let t=e(this);return t instanceof t$?t:this}return e instanceof t$?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):ts(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=tV(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let r={timestamp:(0,tP.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};let t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};let n=t.name;n&&(e.tags={transaction:n,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...tY(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,t,n,r=0){return new tM((o,s)=>{let a=e[r];if(null===t||"function"!=typeof a)o(t);else{let c=a({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.id&&null===c&&i.log(`Event processor "${a.id}" dropped event`),tc(c)?c.then(t=>this._notifyEventProcessors(e,t,n,r+1).then(o)).then(null,s):this._notifyEventProcessors(e,c,n,r+1).then(o).then(null,s)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?tA(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function tY(){return(0,e9.YO)("globalEventProcessors",()=>[])}function tF(e){tY().push(e)}function tV(){return{traceId:tw(),spanId:tw().substring(16),sampled:!1}}class tW{constructor(e,t=new t$,n=4){this._version=n,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){let t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){let e=t$.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){let t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){let n=this._lastEventId=t&&t.event_id?t.event_id:tw(),r=Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},o)}),n}captureMessage(e,t,n){let r=this._lastEventId=n&&n.event_id?n.event_id:tw(),i=Error(e);return this._withClient((o,s)=>{o.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},s)}),r}captureEvent(e,t){let n=t&&t.event_id?t.event_id:tw();return e.type||(this._lastEventId=n),this._withClient((r,i)=>{r.captureEvent(e,{...t,event_id:n},i)}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){let{scope:n,client:r}=this.getStackTop();if(!r)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:o=100}=r.getOptions&&r.getOptions()||{};if(o<=0)return;let s=(0,tP.yW)(),a={timestamp:s,...e},c=i?e6(()=>i(a,t)):a;null!==c&&(r.emit&&r.emit("beforeAddBreadcrumb",c,t),n.addBreadcrumb(c,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){let{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){let t=tK(this);try{e(this)}finally{tK(t)}}getIntegration(e){let t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){let n=this._callExtensionMethod("startTransaction",e,t);return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&!n&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop(),t=e.scope,n=t.getSession();if(n){var r;let e;e={},r?e={status:r}:"ok"===n.status&&(e={status:"exited"}),tB(n,e)}this._sendSessionUpdate(),t.setSession()}startSession(e){let{scope:t,client:n}=this.getStackTop(),{release:r,environment:i=tU}=n&&n.getOptions()||{},{userAgent:o}=e9.n2.navigator||{},s=function(e){let t=(0,tP.ph)(),n={sid:tw(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>tS({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:"number"==typeof n.did||"string"==typeof n.did?`${n.did}`:void 0,duration:n.duration,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})};return e&&tB(n,e),n}({release:r,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&tB(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){let e=this.getClient(),t=e&&e.getOptions();return!!(t&&t.sendDefaultPii)}_sendSessionUpdate(){let{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){let{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){let n=tH(),r=n.__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function tH(){return e9.n2.__SENTRY__=e9.n2.__SENTRY__||{extensions:{},hub:void 0},e9.n2}function tK(e){let t=tH(),n=tJ(t);return tz(t,e),n}function tq(){let e=tH();if(e.__SENTRY__&&e.__SENTRY__.acs){let t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=tH()){return(!(e&&e.__SENTRY__&&e.__SENTRY__.hub)||tJ(e).isOlderThan(4))&&tz(e,new tW),tJ(e)}(e)}function tJ(e){return(0,e9.YO)("hub",()=>new tW,e)}function tz(e,t){if(!e)return!1;let n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}let tX=[];function tZ(e,t){t[e.name]=e,-1===tX.indexOf(e.name)&&(e.setupOnce(tF,tq),tX.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log(`Integration installed: ${e.name}`))}let tQ=/\(error: (.*)\)/,t0=/captureMessage|captureException/;function t1(...e){let t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0)=>{let r=[],i=e.split("\n");for(let e=n;e<i.length;e++){let n=i[e];if(n.length>1024)continue;let o=tQ.test(n)?n.replace(tQ,"$1"):n;if(!o.match(/\S*Error: /)){for(let e of t){let t=e(o);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),t0.test(t[t.length-1].function||"")&&(t.pop(),t0.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"}))}(r)}}let t2="<anonymous>";function t4(e){try{if(!e||"function"!=typeof e)return t2;return e.name||t2}catch(e){return t2}}let t3=(0,e9.Rf)();function t9(){if(!("fetch"in t3))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function t7(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}let t6=(0,e9.Rf)(),t5=(0,e9.Rf)(),t8="__sentry_xhr_v2__",ne={},nt={};function nn(e,t){ne[e]=ne[e]||[],ne[e].push(t),function(e){if(!nt[e])switch(nt[e]=!0,e){case"console":"console"in t5&&e7.forEach(function(e){e in t5.console&&tg(t5.console,e,function(t){return function(...n){nr("console",{args:n,level:e}),t&&t.apply(t5.console,n)}})});break;case"dom":(function(){if(!("document"in t5))return;let e=nr.bind(null,"dom"),t=ns(e,!0);t5.document.addEventListener("click",t,!1),t5.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{let n=t5[t]&&t5[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(tg(n,"addEventListener",function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{let r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=r[n]=r[n]||{refCount:0};if(!o.handler){let r=ns(e);o.handler=r,t.call(this,n,r,i)}o.refCount++}catch(e){}return t.call(this,n,r,i)}}),tg(n,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{let n=this.__sentry_instrumentation_handlers__||{},i=n[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}}))})})();break;case"xhr":(function(){if(!("XMLHttpRequest"in t5))return;let e=XMLHttpRequest.prototype;tg(e,"open",function(e){return function(...t){let n=t[1],r=this[t8]={method:ti(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};ti(n)&&"POST"===r.method&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let i=()=>{let e=this[t8];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}nr("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?tg(this,"onreadystatechange",function(e){return function(...t){return i(),e.apply(this,t)}}):this.addEventListener("readystatechange",i),tg(this,"setRequestHeader",function(e){return function(...t){let[n,r]=t,i=this[t8];return i&&(i.request_headers[n.toLowerCase()]=r),e.apply(this,t)}}),e.apply(this,t)}}),tg(e,"send",function(e){return function(...t){let n=this[t8];return n&&void 0!==t[0]&&(n.body=t[0]),nr("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}})})();break;case"fetch":!function(){if(!t9())return!1;if(t7(t3.fetch))return!0;let e=!1,t=t3.document;if(t&&"function"==typeof t.createElement)try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=t7(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}()||tg(t5,"fetch",function(e){return function(...t){let{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){let[t,n]=e;return{url:no(t),method:ni(n,"method")?String(n.method).toUpperCase():"GET"}}let t=e[0];return{url:no(t),method:ni(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return nr("fetch",{...i}),e.apply(t5,t).then(e=>(nr("fetch",{...i,endTimestamp:Date.now(),response:e}),e),e=>{throw nr("fetch",{...i,endTimestamp:Date.now(),error:e}),e})}});break;case"history":(function(){if(!function(){let e=t6.chrome,t=e&&e.app&&e.app.runtime,n="history"in t6&&!!t6.history.pushState&&!!t6.history.replaceState;return!t&&n}())return;let e=t5.onpopstate;function t(e){return function(...t){let n=t.length>2?t[2]:void 0;if(n){let e=s,t=String(n);s=t,nr("history",{from:e,to:t})}return e.apply(this,t)}}t5.onpopstate=function(...t){let n=t5.location.href,r=s;if(s=n,nr("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},tg(t5.history,"pushState",t),tg(t5.history,"replaceState",t)})();break;case"error":na=t5.onerror,t5.onerror=function(e,t,n,r,i){return nr("error",{column:r,error:i,line:n,msg:e,url:t}),!!na&&!na.__SENTRY_LOADER__&&na.apply(this,arguments)},t5.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":nc=t5.onunhandledrejection,t5.onunhandledrejection=function(e){return nr("unhandledrejection",e),!nc||!!nc.__SENTRY_LOADER__||nc.apply(this,arguments)},t5.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("unknown instrumentation type:",e);return}}(e)}function nr(e,t){if(e&&ne[e])for(let n of ne[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${t4(n)}
Error:`,t)}}function ni(e,t){return!!e&&"object"==typeof e&&!!e[t]}function no(e){return"string"==typeof e?e:e?ni(e,"url")?e.url:e.toString?e.toString():"":""}function ns(e,t=!1){return n=>{if(!n||c===n||function(e){if("keypress"!==e.type)return!1;try{let t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n))return;let r="keypress"===n.type?"input":n.type;void 0===a?(e({event:n,name:r,global:t}),c=n):function(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(c,n)&&(e({event:n,name:r,global:t}),c=n),clearTimeout(a),a=t5.setTimeout(()=>{a=void 0},1e3)}}let na=null,nc=null,nu=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function nl(e,t=!1){let{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${s}`}function nh(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function nf(e,t=100,r=Infinity){try{return function e(t,r,i=Infinity,o=Infinity,s=function(){let e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++){let r=t[e];if(r===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){let[a,c]=s;if(null==r||["number","boolean","string"].includes(typeof r)&&!("number"==typeof r&&r!=r))return r;let u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(ts(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${t4(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;let r=function(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);if(/^HTML(\w*)Element$/.test(r))return`[HTMLElement: ${r}]`;return`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}}(t,r);if(!u.startsWith("[object "))return u;if(r.__sentry_skip_normalization__)return r;let l="number"==typeof r.__sentry_override_normalization_depth__?r.__sentry_override_normalization_depth__:i;if(0===l)return u.replace("object ","");if(a(r))return"[Circular ~]";if(r&&"function"==typeof r.toJSON)try{let t=r.toJSON();return e("",t,l-1,o,s)}catch(e){}let h=Array.isArray(r)?[]:{},f=0,p=tm(r);for(let t in p){if(!Object.prototype.hasOwnProperty.call(p,t))continue;if(f>=o){h[t]="[MaxProperties ~]";break}let n=p[t];h[t]=e(t,n,l-1,o,s),f++}return c(r),h}("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function np(e,t=[]){return[e,t]}function nd(e,t){let n=e[1];for(let e of n){let n=e[0].type,r=t(e,n);if(r)return!0}return!1}function ng(e,t){let n=t||new TextEncoder;return n.encode(e)}let n_={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function nv(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}class ny extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}let nm=new WeakMap,nE="Not capturing exception because it's already been captured.";class nb{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},e.dsn?this._dsn=function(e){let t="string"==typeof e?function(e){let t=nu.exec(e);if(!t){console.error(`Invalid Sentry Dsn: ${e}`);return}let[n,r,i="",o,s="",a]=t.slice(1),c="",u=a,l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){let e=u.match(/^\d+/);e&&(u=e[0])}return nh({host:o,pass:i,path:c,projectId:u,port:s,protocol:n,publicKey:r})}(e):nh(e);if(t&&function(e){if(!("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__))return!0;let{port:t,projectId:n,protocol:r}=e,o=["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(i.error(`Invalid Sentry Dsn: ${t} missing`),!0));return!o&&(n.match(/^\d+$/)?"http"===r||"https"===r?!(t&&isNaN(parseInt(t,10)))||(i.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):(i.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(i.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("No DSN provided, client will not do anything."),this._dsn){let t=function(e,t={}){var n;let r="string"==typeof t?t:t.tunnel,i="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/?${Object.keys(n={sentry_key:e.publicKey,sentry_version:"7",...i&&{sentry_client:`${i.name}/${i.version}`}}).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&")}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(tI(e)){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log(nE);return}let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then(e=>this._captureEvent(e,t,n)).then(e=>{r=e})),r}captureMessage(e,t,n,r){let i=n&&n.event_id,o=to(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(o.then(e=>this._captureEvent(e,n,r)).then(e=>{i=e})),i}captureEvent(e,t,n){if(t&&t.originalException&&tI(t.originalException)){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log(nE);return}let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then(e=>{r=e})),r}captureSession(e){if(!this._isEnabled()){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("SDK not enabled, will not capture session.");return}"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),tB(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){let t=this._transport;return t?this._isClientDoneProcessing(e).then(n=>t.flush(e).then(e=>n&&e)):tj(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,e))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){let t={};return e.forEach(e=>{e&&tZ(e,t)}),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){tZ(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let n=function(e,t,n,r){var i;let o=nv(n),s=e.type&&"replay_event"!==e.type?e.type:"event";(i=n&&n.sdk)&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||i.name,e.sdk.version=e.sdk.version||i.version,e.sdk.integrations=[...e.sdk.integrations||[],...i.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...i.packages||[]]);let a=function(e,t,n,r){let i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&{dsn:nl(r)},...i&&{trace:tS({...i})}}}(e,o,r,t);delete e.sdkProcessingMetadata;let c=[{type:s},e];return np(a,[c])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(let e of t.attachments||[])n=function(e,t){let[n,r]=e;return[n,[...r,t]]}(n,function(e,t){let n="string"==typeof e.data?ng(e.data,t):e.data;return[tS({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));let r=this._sendEnvelope(n);r&&r.then(t=>this.emit("afterSendEvent",e,t),null)}}sendSession(e){if(this._dsn){let t=function(e,t,n,r){let i=nv(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:nl(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return np(o,[s])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){let n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach(e=>e(...t))}_updateSessionFromEvent(e,t){let n=!1,r=!1,i=t.exception&&t.exception.values;if(i)for(let e of(r=!0,i)){let t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}let o="ok"===e.status,s=o&&0===e.errors||o&&n;s&&(tB(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new tM(t=>{let n=0,r=setInterval(()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){let r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),(function(e,t,n,r){let{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e,s={...t,event_id:t.event_id||n.event_id||tw(),timestamp:t.timestamp||(0,tP.yW)()},a=n.integrations||e.integrations.map(e=>e.name);(function(e,t){let{environment:n,release:r,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:tU),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=tf(e.message,o));let s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=tf(s.value,o));let a=e.request;a&&a.url&&(a.url=tf(a.url,o))})(s,e),a.length>0&&(s.sdk=s.sdk||{},s.sdk.integrations=[...s.sdk.integrations||[],...a]),void 0===t.type&&function(e,t){let n;let r=e9.n2._sentryDebugIds;if(!r)return;let i=nm.get(t);i?n=i:(n=new Map,nm.set(t,n));let o=Object.keys(r).reduce((e,i)=>{let o;let s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){let n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e},{});try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.filename&&(e.debug_id=o[e.filename])})})}catch(e){}}(s,e.stackParser);let c=r;n.captureContext&&(c=t$.clone(c).update(n.captureContext));let u=tj(s);if(c){if(c.getAttachments){let e=[...n.attachments||[],...c.getAttachments()];e.length&&(n.attachments=e)}u=c.applyToEvent(s,n)}return u.then(e=>(e&&function(e){let t={};try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})})}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.keys(t).forEach(e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})})}(e),"number"==typeof i&&i>0)?function(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:nf(e.data,t,n)}}))},...e.user&&{user:nf(e.user,t,n)},...e.contexts&&{contexts:nf(e.contexts,t,n)},...e.extra&&{extra:nf(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=nf(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(e=>(e.data&&(e.data=nf(e.data,t,n)),e))),r}(e,i,o):e)})(r,e,t,n).then(e=>{if(null===e)return e;let{propagationContext:t}=e.sdkProcessingMetadata||{},r=e.contexts&&e.contexts.trace;if(!r&&t){let{traceId:r,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:{trace_id:r,span_id:i,parent_span_id:o},...e.contexts};let a=s||function(e,t,n){let r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=n&&n.getUser()||{},s=tS({environment:r.environment||tU,release:r.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e})}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then(e=>e.event_id,e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&("log"===e.logLevel?i.log(e.message):i.warn(e))})}_processEvent(e,t,n){let r=this.getOptions(),{sampleRate:i}=r;if(!this._isEnabled())return tG(new ny("SDK not enabled, will not capture event.","log"));let o=nw(e),s=nS(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),tG(new ny(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));let u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then(n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new ny("An event processor returned `null`, will not send event.","log");let i=t.data&&!0===t.data.__sentry__;if(i)return n;let o=function(e,t,n){let{beforeSend:r,beforeSendTransaction:i}=e;return nS(t)&&r?r(t,n):nw(t)&&i?i(t,n):t}(r,n,t);return function(e,t){let n=`${t} must return \`null\` or a valid event.`;if(tc(e))return e.then(e=>{if(!ts(e)&&null!==e)throw new ny(n);return e},e=>{throw new ny(`${t} rejected with ${e}`)});if(!ts(e)&&null!==e)throw new ny(n);return e}(o,c)}).then(r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new ny(`${c} returned \`null\`, will not send event.`,"log");let i=n&&n.getSession();!o&&i&&this._updateSessionFromEvent(i,r);let s=r.transaction_info;return o&&s&&r.transaction!==e.transaction&&(r.transaction_info={...s,source:"custom"}),this.sendEvent(r,t),r}).then(null,e=>{if(e instanceof ny)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new ny(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error("Error while sending event:",e)});("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error("Transport disabled")}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{let[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}})}}function nS(e){return void 0===e.type}function nw(e){return"transaction"===e.type}let nT="7.64.0";var nO=n(4285);function nC(e,t){let n=nI(e,t),r={type:t&&t.name,value:function(e){let t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function nR(e,t){return{exception:{values:[nC(e,t)]}}}function nI(e,t){let n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(nA.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}let nA=/Minified React error #\d+;/i;function nN(e,t,n,r,i){let o;if(tn(t)&&t.error)return nR(e,t.error);if(tr(t)||tt(t,"DOMException")){if("stack"in t)o=nR(e,t);else{let i=t.name||(tr(t)?"DOMError":"DOMException"),s=t.message?`${i}: ${t.message}`:i;tC(o=nk(e,s,n,r),s)}return"code"in t&&(o.tags={...o.tags,"DOMException.code":`${t.code}`}),o}return te(t)?nR(e,t):(ts(t)||ta(t)?tR(o=function(e,t,n,r){let i=tq(),o=i.getClient(),s=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:ta(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:function(e,{isUnhandledRejection:t}){let n=function(e,t=40){let n=Object.keys(tm(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return tf(n[0],t);for(let e=n.length;e>0;e--){let r=n.slice(0,e).join(", ");if(!(r.length>t)){if(e===n.length)return r;return tf(r,t)}}return""}(e),r=t?"promise rejection":"exception";if(tn(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(ta(e)){let t=function(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}(t,{isUnhandledRejection:r})}]},extra:{__serialized__:function e(t,n=3,r=102400){let i=nf(t,n);return~-encodeURI(JSON.stringify(i)).split(/%..|./).length>r?e(t,n-1,r):i}(t,s)}};if(n){let t=nI(e,n);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,n,i),{synthetic:!0}):(tC(o=nk(e,t,n,r),`${t}`,void 0),tR(o,{synthetic:!0})),o)}function nk(e,t,n,r){let i={message:t};if(r&&n){let r=nI(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]})}return i}function nx(e,t){return tq().captureException(e,{captureContext:t})}let nD=e9.n2,nL=0;function nP(e,t={},n){if("function"!=typeof e)return e;try{let t=e.__sentry_wrapped__;if(t)return t;if(ty(e))return e}catch(t){return e}let r=function(){let r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);let i=r.map(e=>nP(e,t));return e.apply(this,i)}catch(e){throw nL++,setTimeout(()=>{nL--}),tq().withScope(n=>{n.addEventProcessor(e=>(t.mechanism&&(tC(e,void 0,void 0),tR(e,t.mechanism)),e.extra={...e.extra,arguments:r},e)),nx(e)}),e}};try{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}tv(r,e),t_(e,"__sentry_wrapped__",r);try{let t=Object.getOwnPropertyDescriptor(r,"name");t.configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}let nU=["fatal","error","warning","log","info","debug"];function nj(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}let nG="Breadcrumbs";class nM{static __initStatic(){this.id=nG}constructor(e){this.name=nM.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){var e;this.options.console&&nn("console",nB),this.options.dom&&nn("dom",(e=this.options.dom,function(t){let n;let r="object"==typeof e?e.serializeAttribute:void 0,o="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;o&&o>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=1024),"string"==typeof r&&(r=[r]);try{let e=t.event;n=e&&e.target?th(e.target,{keyAttrs:r,maxStringLength:o}):th(e,{keyAttrs:r,maxStringLength:o})}catch(e){n="<unknown>"}0!==n.length&&tq().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&nn("xhr",n$),this.options.fetch&&nn("fetch",nY),this.options.history&&nn("history",nF)}addSentryBreadcrumb(e){this.options.sentry&&tq().addBreadcrumb({category:`sentry.${"transaction"===e.type?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:tO(e)},{event:e})}}function nB(e){var t;for(let t=0;t<e.args.length;t++)if("ref=Ref<"===e.args[t]){e.args[t+1]="viewRef";break}let n={category:"console",data:{arguments:e.args,logger:"console"},level:"warn"===(t=e.level)?"warning":nU.includes(t)?t:"log",message:tp(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${tp(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}tq().addBreadcrumb(n,{input:e.args,level:e.level})}function n$(e){let{startTimestamp:t,endTimestamp:n}=e,r=e.xhr[t8];if(!t||!n||!r)return;let{method:i,url:o,status_code:s,body:a}=r,c={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:n};tq().addBreadcrumb({category:"xhr",data:{method:i,url:o,status_code:s},type:"http"},c)}function nY(e){let{startTimestamp:t,endTimestamp:n}=e;if(!(!n||e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method)){if(e.error){let r=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};tq().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{let r={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};tq().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}}function nF(e){let t=e.from,n=e.to,r=nj(nD.location.href),i=nj(t),o=nj(n);i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===i.protocol&&r.host===i.host&&(t=i.relative),tq().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}nM.__initStatic();class nV extends nb{constructor(e){let t=nD.SENTRY_SDK_SOURCE||(0,nO.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:nT}],version:nT},super(e),e.sendClientReports&&nD.document&&nD.document.addEventListener("visibilitychange",()=>{"hidden"===nD.document.visibilityState&&this._flushOutcomes()})}eventFromException(e,t){return function(e,t,n,r){let i=n&&n.syntheticException||void 0,o=nN(e,t,i,r);return tR(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),tj(o)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,i){let o=r&&r.syntheticException||void 0,s=nk(e,t,o,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),tj(s)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){let n=this.getIntegrationById(nG);n&&n.addSentryBreadcrumb&&n.addSentryBreadcrumb(e),super.sendEvent(e,t)}captureUserFeedback(e){if(!this._isEnabled()){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("SDK not enabled, will not capture user feedback.");return}let t=function(e,{metadata:t,tunnel:n,dsn:r}){let i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:nl(r)}},o=[{type:"user_report"},e];return np(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){let e=this._clearOutcomes();if(0===e.length){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log("No outcomes to send");return}if(!this._dsn){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log("No dsn provided, will not send outcomes");return}("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log("Sending outcomes:",e);let t=function(e,t,n){let r=[{type:"client_report"},{timestamp:(0,tP.yW)(),discarded_events:e}];return np(t?{dsn:t}:{},[r])}(e,this._options.tunnel&&nl(this._dsn));this._sendEnvelope(t)}}class nW{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=nW.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:nH,onunhandledrejection:nK}}setupOnce(){Error.stackTraceLimit=50;let e=this._options;for(let t in e){let n=this._installFunc[t];n&&e[t]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.log(`Global Handler attached: ${t}`),n(),this._installFunc[t]=void 0)}}}function nH(){nn("error",e=>{let[t,n,r]=nz();if(!t.getIntegration(nW))return;let{msg:i,url:o,line:s,column:a,error:c}=e;if(nL>0||c&&c.__sentry_own_request__)return;let u=void 0===c&&ti(i)?function(e,t,n,r){let i=tn(e)?e.message:e,o="Error",s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2]);let a={exception:{values:[{type:o,value:i}]}};return nq(a,t,n,r)}(i,o,s,a):nq(nN(n,c||i,void 0,r,!1),o,s,a);u.level="error",nJ(t,c,u,"onerror")})}function nK(){nn("unhandledrejection",e=>{let[t,n,r]=nz();if(!t.getIntegration(nW))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}if(nL>0||i&&i.__sentry_own_request__)return!0;let o=to(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:nN(n,i,void 0,r,!0);o.level="error",nJ(t,i,o,"onunhandledrejection")})}function nq(e,t,n,r){let i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,h=ti(t)&&t.length>0?t:function(){try{return tl.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:h,function:"?",in_app:!0,lineno:l}),e}function nJ(e,t,n,r){tR(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function nz(){let e=tq(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}nW.__initStatic();let nX=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class nZ{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=nZ.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&tg(nD,"setTimeout",nQ),this._options.setInterval&&tg(nD,"setInterval",nQ),this._options.requestAnimationFrame&&tg(nD,"requestAnimationFrame",n0),this._options.XMLHttpRequest&&"XMLHttpRequest"in nD&&tg(XMLHttpRequest.prototype,"send",n1);let e=this._options.eventTarget;if(e){let t=Array.isArray(e)?e:nX;t.forEach(n2)}}}function nQ(e){return function(...t){let n=t[0];return t[0]=nP(n,{mechanism:{data:{function:t4(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function n0(e){return function(t){return e.apply(this,[nP(t,{mechanism:{data:{function:"requestAnimationFrame",handler:t4(e)},handled:!0,type:"instrument"}})])}}function n1(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"==typeof n[e]&&tg(n,e,function(t){let n={mechanism:{data:{function:e,handler:t4(t)},handled:!0,type:"instrument"}},r=ty(t);return r&&(n.mechanism.data.handler=t4(r)),nP(t,n)})}),e.apply(this,t)}}function n2(e){let t=nD[e]&&nD[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(tg(t,"addEventListener",function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=nP(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:t4(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[n,nP(r,{mechanism:{data:{function:"addEventListener",handler:t4(r),target:e},handled:!0,type:"instrument"}}),i])}}),tg(t,"removeEventListener",function(e){return function(t,n,r){try{let i=n&&n.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch(e){}return e.call(this,t,n,r)}}))}function n4(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function n3(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}nZ.__initStatic();class n9{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=n9.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,t){e((e,n)=>{let r=t(),i=r.getClient(),o=r.getIntegration(n9);if(!i||!o)return e;let s=i.getOptions();return!function(e,t,n=250,r,i,o,s){if(!o.exception||!o.exception.values||!s||!tu(s.originalException,Error))return;let a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=(function e(t,n,r,i,o,s,a,c){if(s.length>=r+1)return s;let u=[...s];if(tu(i[o],Error)){n4(a,c);let s=t(n,i[o]),l=u.length;n3(s,o,l,c),u=e(t,n,r,i[o],o,[s,...u],s,l)}return Array.isArray(i.errors)&&i.errors.forEach((i,s)=>{if(tu(i,Error)){n4(a,c);let l=t(n,i),h=u.length;n3(l,`errors[${s}]`,h,c),u=e(t,n,r,i,o,[l,...u],l,h)}}),u})(e,t,i,s.originalException,r,o.exception.values,a,0).map(e=>(e.value&&(e.value=tf(e.value,n)),e)))}(nC,s.stackParser,s.maxValueLength,o._key,o._limit,e,n),e})}}n9.__initStatic();class n7{static __initStatic(){this.id="HttpContext"}constructor(){this.name=n7.id}setupOnce(){tF(e=>{if(tq().getIntegration(n7)){if(!nD.navigator&&!nD.location&&!nD.document)return e;let t=e.request&&e.request.url||nD.location&&nD.location.href,{referrer:n}=nD.document||{},{userAgent:r}=nD.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:i};return{...e,request:o}}return e})}}n7.__initStatic();class n6{static __initStatic(){this.id="Dedupe"}constructor(){this.name=n6.id}setupOnce(e,t){let n=e=>{if(e.type)return e;let n=t().getIntegration(n6);if(n){try{var r;if((r=n._previousEvent)&&(function(e,t){let n=e.message,r=t.message;return!!((n||r)&&(!n||r)&&(n||!r)&&n===r&&n8(e,t)&&n5(e,t))}(e,r)||function(e,t){let n=re(t),r=re(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&n8(e,t)&&n5(e,t))}(e,r)))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function n5(e,t){let n=rt(e),r=rt(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function n8(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function re(e){return e.exception&&e.exception.values&&e.exception.values[0]}function rt(e){let t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){}}function rn(e,t,n,r){let i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}n6.__initStatic();let rr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ri=/\((\S*)(?::(\d+))(?::(\d+))\)/,ro=[30,e=>{let t=rr.exec(e);if(t){let e=t[2]&&0===t[2].indexOf("eval");if(e){let e=ri.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}let[n,r]=rf(t[1]||"?",t[2]);return rn(r,n,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],rs=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ra=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rc=[50,e=>{let t=rs.exec(e);if(t){let e=t[3]&&t[3].indexOf(" > eval")>-1;if(e){let e=ra.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let n=t[3],r=t[1]||"?";return[r,n]=rf(r,n),rn(n,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ru=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,rl=[40,e=>{let t=ru.exec(e);return t?rn(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0}],rh=t1(...[ro,rc,rl]),rf=(e,t)=>{let n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function rp(e,t,n=function(e){let t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return tG(new ny("Not adding Promise because buffer limit was reached."));let i=r();return -1===t.indexOf(i)&&t.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(e){return new tM((n,r)=>{let i=t.length;if(!i)return n(!0);let o=setTimeout(()=>{e&&e>0&&n(!1)},e);t.forEach(e=>{tj(e).then(()=>{--i||(clearTimeout(o),n(!0))},r)})})}}}(e.bufferSize||30)){let r={};function o(o){let s=[];if(nd(o,(t,n)=>{let i=n_[n];if(function(e,t,n=Date.now()){return(e[t]||e.all||0)>n}(r,i)){let r=rd(t,n);e.recordDroppedEvent("ratelimit_backoff",i,r)}else s.push(t)}),0===s.length)return tj();let a=np(o[0],s),c=t=>{nd(a,(n,r)=>{let i=rd(n,r);e.recordDroppedEvent(t,n_[r],i)})};return n.add(()=>t({body:function(e,t){let[n,r]=e,i=JSON.stringify(n);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[ng(i,t),e]:i.push("string"==typeof e?ng(e,t):e)}for(let e of r){let[t,n]=e;if(o(`
${JSON.stringify(t)}
`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(nf(n))}o(e)}}return"string"==typeof i?i:function(e){let t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return n}(i)}(a,e.textEncoder)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},o=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(o)for(let e of o.trim().split(",")){let[t,n]=e.split(":",2),o=parseInt(t,10),s=(isNaN(o)?60:o)*1e3;if(n)for(let e of n.split(";"))i[e]=r+s;else i.all=r+s}else s?i.all=r+function(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(s,r):429===t&&(i.all=r+6e4);return i}(r,e),e),e=>{throw c("network_error"),e})).then(e=>e,e=>{if(e instanceof ny)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.error("Skipped sending event because buffer is full."),c("queue_overflow"),tj();throw e})}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function rd(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function rg(e,t=function(){if(u)return u;if(t7(nD.fetch))return u=nD.fetch.bind(nD);let e=nD.document,t=nD.fetch;if(e&&"function"==typeof e.createElement)try{let n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);let r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return u=t.bind(nD)}()){let n=0,r=0;return rp(e,function(i){let o=i.body.length;n+=o,r++;let s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,s).then(e=>(n-=o,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return u=void 0,n-=o,r--,tG(e)}})}function r_(e){return rp(e,function(t){return new tM((n,r)=>{let i=new XMLHttpRequest;for(let t in i.onerror=r,i.onreadystatechange=()=>{4===i.readyState&&n({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url),e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&i.setRequestHeader(t,e.headers[t]);i.send(t.body)})})}let rv=[new tx,new tL,new nZ,new nM,new nW,new n9,new n6,new n7];function ry(e){e.startSession({ignoreDuration:!0}),e.captureSession()}{let{SENTRY_DSN:e,NAME:t}=B();!function(e={}){var t;void 0===e.defaultIntegrations&&(e.defaultIntegrations=rv),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),nD.SENTRY_RELEASE&&nD.SENTRY_RELEASE.id&&(e.release=nD.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);let n={...e,stackParser:Array.isArray(t=e.stackParser||rh)?t1(...t):t,integrations:function(e){let t;let n=e.defaultIntegrations||[],r=e.integrations;n.forEach(e=>{e.isDefaultInstance=!0}),t=Array.isArray(r)?[...n,...r]:"function"==typeof r?tA(r(n)):n;let i=function(e){let t={};return e.forEach(e=>{let{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.keys(t).map(e=>t[e])}(t),o=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return -1}(i,e=>"Debug"===e.name);if(-1!==o){let[e]=i.splice(o,1);i.push(e)}return i}(e),transport:e.transport||(t9()?rg:r_)};!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?i.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));let n=tq(),r=n.getScope();r.update(t.initialScope);let o=new e(t);n.bindClient(o)}(nV,n),e.autoSessionTracking&&function(){if(void 0===nD.document){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}let e=tq();e.captureSession&&(ry(e),nn("history",({from:e,to:t})=>{void 0===e||e===t||ry(tq())}))}()}({enabled:!0,environment:t,dsn:e,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications.","Extension context invalidated.","No error message","AbortError: The play() request was interrupted by a call to pause().","SecurityError: Failed to execute 'sendBeacon' on 'Navigator':","Text content does not match server-rendered HTML.","Hydration failed because the initial UI does not match what was rendered on the server."]})}function rm(e,t){nx(e,t)}function rE(e){let[t,n]=(0,R.useState)(!1);return{error:t,onError:t=>{if("error"in t.currentTarget){let{error:r}=t.currentTarget;I("Watch Page - Error",{error:null==r?void 0:r.message,slug:null==e?void 0:e.vanity_url,storage_location:null==e?void 0:e.storage_location}),nx(Error(null==r?void 0:r.message),{tags:(null==e?void 0:e.storage_location)?{storage_location:e.storage_location}:{},extra:{video:e}}),n(!0)}},clearError:()=>n(!1)}}new Date("June 10 2019").toISOString();let rb=()=>{let[e,t]=(0,R.useState)({width:window.innerWidth,height:window.innerHeight});return(0,R.useEffect)(()=>{let e=()=>{t(e=>{let t=window.innerWidth,n=window.innerHeight;return e.width!==t||e.height!==n?{width:t,height:n}:e})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},7363:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});let r=(e,t,n)=>"utm_source=".concat(e,"&utm_medium=").concat(t,"&utm_campaign=").concat(n)},4406:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],u=!1,l=-1;function h(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(r=c,c=[];++l<t;)r&&r[l].run();l=-1,t=c.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},2970:function(e,t,n){"use strict";n.d(t,{CR:function(){return l},Jh:function(){return c},XA:function(){return u},ZT:function(){return i},_T:function(){return s},ev:function(){return h},mG:function(){return a},pi:function(){return o}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function c(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6570),t(6244)}),_N_E=e.O()}]);